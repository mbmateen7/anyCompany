"use strict";(self.webpackChunkhumphree=self.webpackChunkhumphree||[]).push([[294],{294:(T,p,i)=>{i.r(p),i.d(p,{SetupAccountModule:()=>P});var u=i(9808),r=i(7587),t=i(5e3),l=i(9634),h=i(7361),g=i(629),d=i(4182);function m(o,n){1&o&&(t.TgZ(0,"h1",11),t._uU(1,"Verifying, Please Wait"),t.qZA())}function f(o,n){1&o&&(t.TgZ(0,"h1",11),t._uU(1,"Error verifying request"),t.qZA())}function _(o,n){if(1&o&&(t.TgZ(0,"div",2)(1,"div",8)(2,"div",9)(3,"div",1)(4,"div",2)(5,"div",3),t.YNc(6,m,2,0,"h1",10),t.YNc(7,f,2,0,"h1",10),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.isLoading&&e.tokenVerified),t.xp6(1),t.Q6J("ngIf",!e.isLoading&&!e.tokenVerified)}}function v(o,n){1&o&&(t.TgZ(0,"span",23),t._uU(1,"Password does not match"),t.qZA())}const w=function(o){return{disabled:o}};function x(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",8)(2,"div",12)(3,"div",1)(4,"div",2)(5,"div",3)(6,"h1",11),t._uU(7,"Update Password"),t.qZA(),t.TgZ(8,"p",13),t._uU(9,"Please enter your new password"),t.qZA(),t.TgZ(10,"div",14)(11,"label",15),t._uU(12,"New Password"),t.TgZ(13,"span",16),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"input",17),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().updatePasswordObj.password=a}),t.qZA()(),t.TgZ(16,"div",14)(17,"label",15),t._uU(18,"Confirm Password"),t.TgZ(19,"span",16),t._uU(20,"*"),t.qZA()(),t.TgZ(21,"input",18),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().updatePasswordObj.password_confirmation=a})("input",function(){return t.CHM(e),t.oxw().passwordMismatch()}),t.qZA(),t.YNc(22,v,2,0,"span",19),t.qZA(),t.TgZ(23,"div",20)(24,"a",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().skipPassword()}),t._uU(25,"Skip"),t.qZA(),t.TgZ(26,"a",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().updatePassword()}),t._uU(27,"Update Password"),t.qZA()()()()()()()()}if(2&o){const e=t.oxw();t.xp6(15),t.Q6J("ngModel",e.updatePasswordObj.password),t.xp6(6),t.Q6J("ngModel",e.updatePasswordObj.password_confirmation),t.xp6(1),t.Q6J("ngIf",e.invalidConfirmPassword),t.xp6(4),t.Q6J("ngClass",t.VKq(4,w,0==e.updatePasswordObj.password.length||0==e.updatePasswordObj.password_confirmation.length||e.updatePasswordObj.password!=e.updatePasswordObj.password_confirmation))}}const A=[{path:"",component:(()=>{class o{constructor(e,s,a,c,Z){this.helper=e,this._authentication=s,this._auth=a,this.route=c,this.router=Z,this.step=0,this.isLoading=!0,this.tokenVerified=!0,this.updatePasswordObj={verification_code:"",password:"",password_confirmation:"",skip:!1},this.invalidConfirmPassword=!1}ngOnInit(){this.verifyToken()}verifyToken(){this.route.queryParams.subscribe(e=>{e.token?(this.updatePasswordObj.verification_code=e.token,this._authentication.setupAccount({verification_code:e.token}).subscribe(s=>{this.isLoading=!1,this.step=1},()=>{this.isLoading=!1,this.tokenVerified=!1})):this.helper.toastError("verification token is missing")})}updatePassword(){this._authentication.skipPasswordUpdate(this.updatePasswordObj).subscribe(e=>{this._auth.storeUserData(e.data.access_token,e.data.user)})}skipPassword(){this.updatePasswordObj.skip=!0,this._authentication.skipPasswordUpdate(this.updatePasswordObj).subscribe(e=>{this._auth.storeUserData(e.data.access_token,e.data.user)})}passwordMismatch(){this.invalidConfirmPassword=this.updatePasswordObj.password!=this.updatePasswordObj.password_confirmation}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.B),t.Y36(h.$),t.Y36(g.e),t.Y36(r.gz),t.Y36(r.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-setup-account"]],decls:9,vars:2,consts:[[1,"reset-page"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"img-logo","mx-0"],["href","index.html"],["src","assets/img/logo.png","alt","logo",1,"img-fluid"],["class","row",4,"ngIf"],[1,"col-md-8","mx-auto"],[1,"box-reset","text-center"],["class","reset-heading",4,"ngIf"],[1,"reset-heading"],[1,"box-reset"],[1,"reset-para","mb-30"],[1,"input-style","mb-2"],[1,"d-block"],[1,"text-danger"],["type","text","placeholder","New Password","name","password",1,"ctm-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Confirm Password","name","password_confirmation",1,"ctm-input",3,"ngModel","ngModelChange","input"],["class","text text-danger",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-around","mt-3"],["href","javascript:void(0)",1,"login-p",3,"click"],["href","javascript:void(0)",1,"login-p",3,"ngClass","click"],[1,"text","text-danger"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"img",6),t.qZA()()()(),t.YNc(7,_,8,2,"div",7),t.YNc(8,x,28,6,"div",7),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",0==s.step),t.xp6(1),t.Q6J("ngIf",1==s.step))},directives:[u.O5,d.Fj,d.JJ,d.On,u.mk],styles:[""]}),o})()}];let C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[r.Bz.forChild(A)],r.Bz]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,d.u5,C]]}),o})()}}]);