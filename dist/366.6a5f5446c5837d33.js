"use strict";(self.webpackChunkhumphree=self.webpackChunkhumphree||[]).push([[366],{8366:(qt,O,c)=>{c.r(O),c.d(O,{RodModule:()=>Nt});var _=c(9808),h=c(7587),e=c(5e3),m=c(1702),f=c(9634),k=c(629);let U=(()=>{class r{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(t){for(let n in t)t.hasOwnProperty(n)&&this._printStyle.push((n+JSON.stringify(t[n])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(t){let n=function(o){return`<link rel="stylesheet" type="text/css" href="${o}">`};if(-1!==t.indexOf(",")){const o=t.split(",");for(let i of o)this._styleSheetFile=this._styleSheetFile+n(i)}else this._styleSheetFile=n(t)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(t){const n=[],o=document.getElementsByTagName(t);for(let i=0;i<o.length;i++)n.push(o[i].outerHTML);return n.join("\r\n")}getFormData(t){for(var n=0;n<t.length;n++)t[n].defaultValue=t[n].value,t[n].checked&&(t[n].defaultChecked=!0)}getHtmlContents(){let t=document.getElementById(this.printSectionId),n=t.getElementsByTagName("input");this.getFormData(n);let o=t.getElementsByTagName("textarea");return this.getFormData(o),t.innerHTML}print(){let t,n,o="",i="";const a=this.getElementTag("base");this.useExistingCss&&(o=this.getElementTag("style"),i=this.getElementTag("link")),t=this.getHtmlContents(),n=window.open("","_blank","top=0,left=0,height=auto,width=auto"),n.document.open(),n.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${a}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${o}\n          ${i}\n        </head>\n        <body>\n          ${t}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),n.document.close()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=e.lG2({type:r,selectors:[["button","ngxPrint",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),r})(),N=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[]]}),r})();var s=c(4182),C=c(6783);function q(r,d){1&r&&(e.TgZ(0,"li",5)(1,"a",110),e._uU(2,"NEW DELIVERY TICKET"),e.qZA()())}function J(r,d){if(1&r&&(e.TgZ(0,"li",5)(1,"a",110),e._uU(2),e.qZA()()),2&r){const t=e.oxw();e.xp6(2),e.hij("UPDATE DELIVERY TICKET (",t.currentDeliveryNote.ticket_no,")")}}function P(r,d){1&r&&(e.TgZ(0,"button",111),e._uU(1,"Print"),e.qZA())}function S(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",112),e.NdJ("click",function(){return e.CHM(t),e.oxw().addDeliveryNote()}),e._uU(1," Save"),e.qZA()}}function D(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",112),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateDeliveryNote()}),e._uU(1," Update"),e.qZA()}}function I(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",113),e.NdJ("click",function(){return e.CHM(t),e.oxw().resetFormValue()}),e._uU(1," New Dispatch Order"),e.qZA()}}const A=function(r){return{active:r}};function Q(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",114)(1,"ul",115)(2,"li",116),e._uU(3),e.qZA(),e.TgZ(4,"li",117),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"li",118)(8,"a",119),e.NdJ("click",function(){const i=e.CHM(t).$implicit,a=e.oxw();return a.currentDeliveryNote=a.deliveryOrder=i}),e._uU(9,"View"),e.qZA()()()()}if(2&r){const t=d.$implicit,n=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(7,A,t.id==(null==n.currentDeliveryNote?null:n.currentDeliveryNote.id))),e.xp6(1),e.Oqu(t.ticket_no),e.xp6(2),e.Oqu(e.xi3(6,4,t.dispatch_date,"dd/MM/yyyy")),e.xp6(2),e.Q6J("ngClass",e.VKq(9,A,t.id==(null==n.currentDeliveryNote?null:n.currentDeliveryNote.id)))}}function E(r,d){if(1&r&&(e.TgZ(0,"span",120)(1,"span",121),e._uU(2),e.qZA()()),2&r){const t=d.$implicit;e.xp6(2),e.Oqu(t.work_number)}}function F(r,d){1&r&&(e.TgZ(0,"span",122),e._uU(1,"\u2713"),e.qZA())}function R(r,d){if(1&r&&(e.TgZ(0,"option",123),e._uU(1),e.qZA()),2&r){const t=d.$implicit,n=d.index,o=e.oxw();e.Q6J("value",n)("hidden",o.checkSelectedOrder(t.id)),e.xp6(1),e.Oqu(t.work_number)}}function Y(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"span")(1,"i-feather",126),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().removeOrder(o)}),e.qZA()()}}function H(r,d){if(1&r&&(e.TgZ(0,"span",124),e._uU(1),e.YNc(2,Y,2,0,"span",125),e.qZA()),2&r){const t=d.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",t.work_number," "),e.xp6(1),e.Q6J("ngIf",t.id!=n.workOrder.id)}}function j(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",112),e.NdJ("click",function(){return e.CHM(t),e.oxw().addDeliveryNote()}),e._uU(1," Save"),e.qZA()}}function z(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",112),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateDeliveryNote()}),e._uU(1," Update"),e.qZA()}}let L=(()=>{class r{constructor(t,n,o,i,a,l){this._rod=t,this.helper=n,this.route=o,this.datePipe=i,this._location=a,this._auth=l,this.customerOrders=[],this.deliveryNotes=[],this.deliveryOrder={invoice_to:"",ticket_no:"",dispatch_date:"",fsc:!1,order_number:"",properties:{flush_door:"",frames:"",linings:"",stops:"",architraves:"",timber_sections:"",hinges:"",glass_pcs:"",glazing_beads:"",hinge_packers:"",intu_strip_10_4:"",intu_smoke_10_4:"",intu_strip_15_4:"",intu_smoke_15_4:"",intu_strip_20_4:"",intu_smoke_20_4:"",drop_down_seals:"",weather_seals:""},work_orders:[],site_contact:"",site_number:"",other_notes:""},this.dateToday=new Date,this.newDeliveryTicketNo="",this.route.params.subscribe(p=>{this.getWorkOrder(p.id),this.getDeliveryNotes(p.id),this.getTicketNo()}),this.currentDate=this.datePipe.transform(new Date,"yyyy-MM-dd")}getTicketNo(){this._rod.getTicketNo().subscribe(t=>{this.newDeliveryTicketNo=this.deliveryOrder.ticket_no=t.data})}getWorkOrder(t){this._rod.getWorkOrder({id:t}).subscribe(n=>{this.workOrder=n.data,this.deliveryOrder.fsc=n.data.fsc,this.deliveryOrder.order_number=n.data.order_number,this.deliveryOrder.work_orders.push({id:n.data.id,work_number:n.data.work_number}),this._rod.getCustomerNumberOrders({order_number:n.data.order_number}).subscribe(o=>{this.customerOrders=o.data})})}getDeliveryNotes(t){this._rod.getDeliveryNotes({work_order_id:t}).subscribe(n=>{this.deliveryNotes=n.data})}ngOnInit(){}addDeliveryNote(){console.log(this.deliveryOrder),this._rod.addDevliveryNote(this.deliveryOrder).subscribe(t=>{this.resetFormValue(),this.getDeliveryNotes(this.workOrder.id),this.getTicketNo()})}removeOrder(t){this.deliveryOrder.work_orders.splice(t,1)}addWorkOrder(t){this.deliveryOrder.work_orders.push(t)}selectWorkOrder(t){"select"!=t.target.value&&this.deliveryOrder.work_orders.push(this.customerOrders[t.target.value]),t.target.value="select"}checkSelectedOrder(t){return!!this.deliveryOrder.work_orders.find(n=>n.id==t)}resetFormValue(){this.deliveryOrder={invoice_to:"",ticket_no:this.newDeliveryTicketNo,dispatch_date:"",fsc:this.workOrder.fsc,order_number:this.workOrder.order_number,properties:{flush_door:"",frames:"",linings:"",stops:"",architraves:"",timber_sections:"",hinges:"",glass_pcs:"",glazing_beads:"",hinge_packers:"",intu_strip_10_4:"",intu_smoke_10_4:"",intu_strip_15_4:"",intu_smoke_15_4:"",intu_strip_20_4:"",intu_smoke_20_4:"",drop_down_seals:"",weather_seals:""},work_orders:[{id:this.workOrder.id,work_number:this.workOrder.work_number}],site_contact:"",site_number:"",other_notes:""},this.currentDeliveryNote=null}updateDeliveryNote(){this._rod.updateDeliveryNote(this.deliveryOrder).subscribe(t=>{this.helper.toastSuccess(t.message)})}redirectBack(){this._location.back()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.W),e.Y36(f.B),e.Y36(h.gz),e.Y36(_.uU),e.Y36(_.Ye),e.Y36(k.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-delivery-note"]],decls:442,vars:69,consts:[[1,"dashboard-main"],[1,"dashboard-content"],[1,"d-flex","align-items-center","mb-16","justify-content-between","mr-70"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item"],["href","javascript:void(0)",1,"breadcrumb-link","active"],[1,"d-flex"],[1,"dispatch-table-buttons"],["class","credit-check mr-1","printSectionId","table-pdf","ngxPrint","",4,"ngIf"],["href","javascript:void(0)",1,"disable-btn-dispatch",3,"click"],["class","credit-check mr-1","href","javascript:void(0)",3,"click",4,"ngIf"],["class","secondary-sup","href","javascript:void(0)",3,"click",4,"ngIf"],[1,"Dispatch-mainbox"],[1,"d-flex","dispatch-wrap-for-respo"],[1,"left-order-detail"],[1,"recent-heading"],[1,"ticket-no"],[1,"ticket-date"],["class","dispatch-list",4,"ngFor","ngForOf"],["id","table-pdf",2,"width","100%","display","none"],[2,"width","100%","border-collapse","collapse","border","2px solid black"],["colspan","6",2,"padding","5px 10px","border","2px solid black"],[2,"width","100%","display","inline-block","white-space","nowrap","text-align","left"],[2,"font-size","12px","font-weight","700","color","#000","margin-bottom","0","padding-right","5px","font-family","'Open Sans', sans-serif !important"],["colspan","4",2,"padding","5px 10px","border","2px solid black","text-align","left"],["colspan","4",2,"padding","5px 10px","border","2px solid black"],["type","text","readonly","",2,"font-size","13px","font-weight","400","color","#000","margin-bottom","0","border","none","width","100%","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],["rows","7",2,"font-size","13px","font-weight","400","color","#000","width","100%","height","160px","overflow-y","auto","border","none","overflow-x","unset","white-space","pre-line","resize","unset","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],["colspan","4",2,"padding","0","border","2px solid black"],[2,"width","100%","border-collapse","collapse"],[2,"border-top","none","border-left","none","border-right","none","padding","5px 10px","border-bottom","2px solid black"],["type","date",2,"font-size","12px","font-weight","400","color","#000","margin-bottom","0","border","none","width","100%","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],["type","text",2,"font-size","13px","font-weight","400","color","#000","margin-bottom","0","border","none","width","100%","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],[2,"border-top","none","border-left","none","border-right","none","padding","5px 10px","border-bottom","none"],[2,"display","inline-block","float","left"],["style","padding: 3px 6px;border-radius: 15px;background: #DC0100;color: #fff;margin-right: 4px;margin-top: 4px;display: inline-block;text-align: center;box-sizing: border-box;font-family: 'Open Sans', sans-serif !important;",4,"ngFor","ngForOf"],["colspan","10",2,"padding","5px 10px","border","2px solid black"],[2,"font-size","9px","font-weight","400","color","#000","text-align","center","margin","1rem 0","font-family","'Open Sans', sans-serif !important"],[2,"width","60%","margin","16px auto 16px","display","block","text-align","center","vertical-align","middle"],[2,"font-size","13px","font-weight","700","color","#000","display","inline-block","text-align","center","vertical-align","middle","float","left","margin","0 !important","margin-bottom","30px !important","font-family","'Open Sans', sans-serif !important"],[2,"float","right","width","20px","height","20px","text-align","center","border","2px solid #DC0100","border-radius","2px"],["style","color: #DC0100;display: block;font-size: 16px;margin-top: 0px;",4,"ngIf"],["colspan","1",2,"padding","5px 10px","border","2px solid black"],["type","text",2,"font-size","12px","font-weight","400","color","#000","margin-bottom","0","border","none","width","100%","height","66px","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],[2,"font-size","10px","font-weight","700","color","#000","display","block","text-align","center","margin","1.2rem 0","font-family","'Open Sans', sans-serif !important"],[2,"width","100%","border-collapse","collapse","width","100%","border-collapse","collapse"],[2,"padding","14px 0","width","100%"],["colspan","5",2,"padding","3px 10px","border","2px solid black"],["colspan","5",2,"padding","5px 10px","border","2px solid black"],["type","text",2,"font-size","12px","font-weight","400","color","#000","margin-bottom","0","border","none","width","100%","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],["colspan","10",2,"padding","3px 10px","border","2px solid black"],[2,"font-size","12px","font-weight","700","color","#000","margin-bottom","0","padding-right","5px","text-align","start","display","block","font-family","'Open Sans', sans-serif !important"],["rows","3","name","other_notes",2,"font-size","12px","font-weight","400","color","#000","width","100%","overflow-y","auto","border","none","overflow-x","unset","white-space","pre-line","resize","unset","outline","none","font-family","'Open Sans', sans-serif !important",3,"ngModel","ngModelChange"],[1,"daspatch-table"],[1,"table-dis"],["colspan","6",1,"table-head"],[1,"input-setts"],[1,"invoice-label"],["colspan","4",1,"table-head"],["colspan","6",1,"table-data"],["colspan","4",1,"table-data"],["type","text","placeholder","52527","readonly","",1,"text-input",3,"ngModel","ngModelChange"],["rows","7","placeholder","Delivery Address",1,"ctm-textarea",3,"ngModel","ngModelChange"],["colspan","4",1,"table-data","table-sec-data"],[1,"table-inner"],[1,"table-data-inner"],["type","date","placeholder","26/11/21",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","388",1,"text-input",3,"ngModel","ngModelChange"],[1,"table-data-inner","position-relative","work-order-cell"],[1,"custom-select-work-orders",3,"change"],["value","select"],[3,"value","hidden",4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap"],["class","fiels-ctm",4,"ngFor","ngForOf"],["colspan","10",1,"table-data"],[1,"dispatch-text"],[1,"d-flex","align-items-center","justify-content-between","dispatch-check"],[1,"pro-dispath"],[1,"remember-me"],[1,"custom-check","custom-check-r"],["type","checkbox","name","fsc",3,"checked","ngModel","ngModelChange"],[1,"checkmark"],["colspan","1",1,"table-data"],["colspan","1",1,"table-data","table-height-data"],["type","text","placeholder","Add","name","flush_door",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","frames",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","stops",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","architraves",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","timber_sections",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","hinges",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","glass_pcs",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","glazing_beads",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","hinge_packers",1,"text-input",3,"ngModel","ngModelChange"],[1,"dispatch-account"],["type","text","placeholder","Add","name","intu_strip_10_4",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","intu_smoke_10_4",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","intu_strip_15_4",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","intu_smoke_15_4",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","intu_strip_20_4",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","intu_smoke_20_4",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","drop_down_seals",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Add","name","weather_seals",1,"text-input",3,"ngModel","ngModelChange"],[1,"padds-py"],["colspan","5",1,"table-head"],["colspan","5",1,"table-data"],["type","text","placeholder","Contact Name","name","site_contact",1,"text-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Contact Phone Number","name","site_number",1,"text-input",3,"ngModel","ngModelChange"],["colspan","10",1,"table-head"],["rows","3","placeholder","Other / Notes","name","other_notes",1,"ctm-textarea-sec-2",3,"ngModel","ngModelChange"],["href","javascript:void(0)",1,"breadcrumb-link"],["printSectionId","table-pdf","ngxPrint","",1,"credit-check","mr-1"],["href","javascript:void(0)",1,"credit-check","mr-1",3,"click"],["href","javascript:void(0)",1,"secondary-sup",3,"click"],[1,"dispatch-list"],[1,"ticket-no-detail"],[1,"ticket-date-detail",3,"ngClass"],[1,"ticket-d-detail"],[1,"ticket-d-detail",3,"ngClass"],["href","javascript:void(0)",1,"view-dis",3,"click"],[2,"padding","3px 6px","border-radius","15px","background","#DC0100","color","#fff","margin-right","4px","margin-top","4px","display","inline-block","text-align","center","box-sizing","border-box","font-family","'Open Sans', sans-serif !important"],[2,"color","#fff","float","left","line-height","14px","font-size","12px"],[2,"color","#DC0100","display","block","font-size","16px","margin-top","0px"],[3,"value","hidden"],[1,"fiels-ctm"],[4,"ngIf"],["name","X",1,"icon-width","w15",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3),e.YNc(4,q,3,0,"li",4),e.YNc(5,J,3,1,"li",4),e.TgZ(6,"li",5)(7,"a",6),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",7),e.YNc(13,P,2,0,"button",9),e.TgZ(14,"a",10),e.NdJ("click",function(){return n.redirectBack()}),e._uU(15," Discard"),e.qZA(),e.YNc(16,S,2,0,"a",11),e.YNc(17,D,2,0,"a",11),e.qZA()(),e.YNc(18,I,2,0,"a",12),e.qZA()(),e.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"h1",16),e._uU(23,"Recent Despatch Order List:"),e.qZA(),e.TgZ(24,"ul",17)(25,"li",18),e._uU(26,"Ticket Number"),e.qZA(),e.TgZ(27,"li",18),e._uU(28,"Date"),e.qZA()(),e.YNc(29,Q,10,11,"div",19),e.qZA(),e.TgZ(30,"div",20)(31,"table",21)(32,"tr")(33,"th",22)(34,"div",23)(35,"label",24),e._uU(36,"Invoice to:"),e.qZA()()(),e.TgZ(37,"th",25)(38,"label",24),e._uU(39,"Ticket No."),e.qZA()()(),e.TgZ(40,"tr")(41,"td",22)(42,"label",24),e._uU(43),e.qZA()(),e.TgZ(44,"td",26)(45,"input",27),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.ticket_no=i}),e.qZA()()(),e.TgZ(46,"tr")(47,"td",22)(48,"textarea",28),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.invoice_to=i}),e.qZA()(),e.TgZ(49,"td",29)(50,"table",30)(51,"tr")(52,"td",31)(53,"label",24),e._uU(54,"Despatch Date:"),e.qZA()()(),e.TgZ(55,"tr")(56,"td",31)(57,"input",32),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.dispatch_date=i}),e.qZA()()(),e.TgZ(58,"tr")(59,"td",31)(60,"label",24),e._uU(61,"Customer Order No."),e.qZA()()(),e.TgZ(62,"tr")(63,"td",31)(64,"input",33),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.order_number=i}),e.qZA()()(),e.TgZ(65,"tr")(66,"td",31)(67,"label",24),e._uU(68,"W/O:"),e.qZA()()(),e.TgZ(69,"tr")(70,"td",34)(71,"div",35),e.YNc(72,E,3,1,"span",36),e.qZA()()()()()(),e.TgZ(73,"tr")(74,"td",37)(75,"p",38),e._uU(76,"Only products identified as such on this Delivery note are FSC certified"),e.qZA(),e.TgZ(77,"div",39)(78,"p",40),e._uU(79,"Products FSC \xae"),e.qZA(),e.TgZ(80,"div",41),e.YNc(81,F,2,0,"span",42),e.qZA()()()(),e.TgZ(82,"tr")(83,"td",43)(84,"label",24),e._uU(85,"Flush Doors"),e.qZA()(),e.TgZ(86,"td",43)(87,"label",24),e._uU(88,"Frames"),e.qZA()(),e.TgZ(89,"td",43)(90,"label",24),e._uU(91,"Stops"),e.qZA()(),e.TgZ(92,"td",43)(93,"label",24),e._uU(94,"Architraves"),e.qZA()(),e.TgZ(95,"td",43)(96,"label",24),e._uU(97,"Timber "),e._UZ(98,"br"),e._uU(99," Sections"),e.qZA()(),e.TgZ(100,"td",43)(101,"label",24),e._uU(102,"Hinges"),e.qZA()(),e.TgZ(103,"td",43)(104,"label",24),e._uU(105,"Glass Pcs"),e.qZA()(),e.TgZ(106,"td",43)(107,"label",24),e._uU(108,"Glazing "),e._UZ(109,"br"),e._uU(110," Beads"),e.qZA()(),e.TgZ(111,"td",43)(112,"label",24),e._uU(113,"FD60 "),e._UZ(114,"br"),e._uU(115," Hinge "),e._UZ(116,"br"),e._uU(117," Packers"),e.qZA()()(),e.TgZ(118,"tr")(119,"td",43)(120,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.flush_door=i}),e.qZA()(),e.TgZ(121,"td",43)(122,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.frames=i}),e.qZA()(),e.TgZ(123,"td",43)(124,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.stops=i}),e.qZA()(),e.TgZ(125,"td",43)(126,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.architraves=i}),e.qZA()(),e.TgZ(127,"td",43)(128,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.timber_sections=i}),e.qZA()(),e.TgZ(129,"td",43)(130,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.hinges=i}),e.qZA()(),e.TgZ(131,"td",43)(132,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.glass_pcs=i}),e.qZA()(),e.TgZ(133,"td",43)(134,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.glazing_beads=i}),e.qZA()(),e.TgZ(135,"td",43)(136,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.hinge_packers=i}),e.qZA()()()(),e.TgZ(137,"p",45),e._uU(138," Fire and Acoustic Seals in 2.1m Lengths "),e.qZA(),e.TgZ(139,"table",46)(140,"tr")(141,"td",43)(142,"label",24),e._uU(143,"10 x 4"),e._UZ(144,"br"),e._uU(145,"Intu Strip"),e.qZA()(),e.TgZ(146,"td",43)(147,"label",24),e._uU(148,"10 x 4"),e._UZ(149,"br"),e._uU(150,"Intu"),e._UZ(151,"br"),e._uU(152,"Smoke"),e.qZA()(),e.TgZ(153,"td",43)(154,"label",24),e._uU(155,"15 x 4"),e._UZ(156,"br"),e._uU(157,"Intu Strip"),e.qZA()(),e.TgZ(158,"td",43)(159,"label",24),e._uU(160,"15 x 4"),e._UZ(161,"br"),e._uU(162,"Intu"),e._UZ(163,"br"),e._uU(164,"Smoke "),e.qZA()(),e.TgZ(165,"td",43)(166,"label",24),e._uU(167,"20 x 4"),e._UZ(168,"br"),e._uU(169,"Intu Strip"),e.qZA()(),e.TgZ(170,"td",43)(171,"label",24),e._uU(172,"20 x 4"),e._UZ(173,"br"),e._uU(174,"Intu"),e._UZ(175,"br"),e._uU(176," Smoke"),e.qZA()(),e.TgZ(177,"td",43)(178,"label",24),e._uU(179,"Drop"),e._UZ(180,"br"),e._uU(181,"Down"),e._UZ(182,"br"),e._uU(183,"Seals"),e.qZA()(),e.TgZ(184,"td",43)(185,"label",24),e._uU(186,"Weather"),e._UZ(187,"br"),e._uU(188,"Seals"),e.qZA()()(),e.TgZ(189,"tr")(190,"td",43)(191,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_strip_10_4=i}),e.qZA()(),e.TgZ(192,"td",43)(193,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_smoke_10_4=i}),e.qZA()(),e.TgZ(194,"td",43)(195,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_strip_15_4=i}),e.qZA()(),e.TgZ(196,"td",43)(197,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_smoke_15_4=i}),e.qZA()(),e.TgZ(198,"td",43)(199,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_strip_20_4=i}),e.qZA()(),e.TgZ(200,"td",43)(201,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_smoke_20_4=i}),e.qZA()(),e.TgZ(202,"td",43)(203,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.drop_down_seals=i}),e.qZA()(),e.TgZ(204,"td",43)(205,"input",44),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.weather_seals=i}),e.qZA()()()(),e._UZ(206,"div",47),e.TgZ(207,"table",46)(208,"tr")(209,"th",48)(210,"label",24),e._uU(211,"Site Contact:"),e.qZA()(),e.TgZ(212,"th",48)(213,"label",24),e._uU(214,"Site Number:"),e.qZA()()(),e.TgZ(215,"tr")(216,"td",49)(217,"input",50),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.site_contact=i}),e.qZA()(),e.TgZ(218,"td",49)(219,"input",50),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.site_number=i}),e.qZA()()()(),e._UZ(220,"div",47),e.TgZ(221,"table",46)(222,"tr")(223,"th",51)(224,"label",52),e._uU(225,"Other / Notes"),e.qZA()()(),e.TgZ(226,"tr")(227,"td",51)(228,"textarea",53),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.other_notes=i}),e.qZA()()()()(),e.TgZ(229,"div",54)(230,"table",55)(231,"tr")(232,"th",56)(233,"div",57)(234,"label",58),e._uU(235,"Invoice to:"),e.qZA()()(),e.TgZ(236,"th",59)(237,"label",58),e._uU(238,"Ticket No."),e.qZA()()(),e.TgZ(239,"tr")(240,"td",60)(241,"label",58),e._uU(242),e.qZA()(),e.TgZ(243,"td",61)(244,"input",62),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.ticket_no=i}),e.qZA()()(),e.TgZ(245,"tr")(246,"td",60)(247,"textarea",63),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.invoice_to=i}),e.qZA()(),e.TgZ(248,"td",64)(249,"table",65)(250,"tr")(251,"td",66)(252,"label",58),e._uU(253,"Despatch Date:"),e.qZA()()(),e.TgZ(254,"tr")(255,"td",66)(256,"input",67),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.dispatch_date=i}),e.qZA()()(),e.TgZ(257,"tr")(258,"td",66)(259,"label",58),e._uU(260,"Customer Order No."),e.qZA()()(),e.TgZ(261,"tr")(262,"td",66)(263,"input",68),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.order_number=i}),e.qZA()()(),e.TgZ(264,"tr")(265,"td",66)(266,"label",58),e._uU(267,"W/O:"),e.qZA()()(),e.TgZ(268,"tr")(269,"td",69)(270,"select",70),e.NdJ("change",function(i){return n.selectWorkOrder(i)}),e.TgZ(271,"option",71),e._uU(272,"Select work order"),e.qZA(),e.YNc(273,R,2,3,"option",72),e.qZA(),e.TgZ(274,"div",73),e.YNc(275,H,3,2,"span",74),e.qZA()()()()()(),e.TgZ(276,"tr")(277,"td",75)(278,"p",76),e._uU(279,"Only products identified as such on this Delivery note are FSC certified"),e.qZA(),e.TgZ(280,"div",77)(281,"p",78),e._uU(282,"Products FSC \xae"),e.qZA(),e.TgZ(283,"div",79)(284,"label",80)(285,"input",81),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.fsc=i}),e.qZA(),e._UZ(286,"span",82),e.qZA()()()()(),e.TgZ(287,"tr")(288,"td",83)(289,"label",58),e._uU(290,"Flush "),e._UZ(291,"br"),e._uU(292," Doors"),e.qZA()(),e.TgZ(293,"td",83)(294,"label",58),e._uU(295,"Frames"),e.qZA()(),e.TgZ(296,"td",83)(297,"label",58),e._uU(298,"Stops"),e.qZA()(),e.TgZ(299,"td",83)(300,"label",58),e._uU(301,"Architraves"),e.qZA()(),e.TgZ(302,"td",83)(303,"label",58),e._uU(304,"Timber "),e._UZ(305,"br"),e._uU(306," Sections"),e.qZA()(),e.TgZ(307,"td",83)(308,"label",58),e._uU(309,"Hinges"),e.qZA()(),e.TgZ(310,"td",83)(311,"label",58),e._uU(312,"Glass Pcs"),e.qZA()(),e.TgZ(313,"td",83)(314,"label",58),e._uU(315,"Glazing "),e._UZ(316,"br"),e._uU(317," Beads"),e.qZA()(),e.TgZ(318,"td",83)(319,"label",58),e._uU(320,"FD60 "),e._UZ(321,"br"),e._uU(322," Hinge "),e._UZ(323,"br"),e._uU(324," Packers"),e.qZA()()(),e.TgZ(325,"tr")(326,"td",84)(327,"input",85),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.flush_door=i}),e.qZA()(),e.TgZ(328,"td",84)(329,"input",86),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.frames=i}),e.qZA()(),e.TgZ(330,"td",84)(331,"input",87),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.stops=i}),e.qZA()(),e.TgZ(332,"td",84)(333,"input",88),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.architraves=i}),e.qZA()(),e.TgZ(334,"td",84)(335,"input",89),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.timber_sections=i}),e.qZA()(),e.TgZ(336,"td",84)(337,"input",90),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.hinges=i}),e.qZA()(),e.TgZ(338,"td",84)(339,"input",91),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.glass_pcs=i}),e.qZA()(),e.TgZ(340,"td",84)(341,"input",92),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.glazing_beads=i}),e.qZA()(),e.TgZ(342,"td",84)(343,"input",93),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.hinge_packers=i}),e.qZA()()()(),e.TgZ(344,"p",94),e._uU(345," Fire and Acoustic Seals in 2.1m Lengths "),e.qZA(),e.TgZ(346,"table",55)(347,"tr")(348,"td",83)(349,"label",58),e._uU(350,"10 x 4"),e._UZ(351,"br"),e._uU(352,"Intu Strip"),e.qZA()(),e.TgZ(353,"td",83)(354,"label",58),e._uU(355,"10 x 4"),e._UZ(356,"br"),e._uU(357,"Intu"),e._UZ(358,"br"),e._uU(359,"Smoke"),e.qZA()(),e.TgZ(360,"td",83)(361,"label",58),e._uU(362,"15 x 4"),e._UZ(363,"br"),e._uU(364,"Intu Strip"),e.qZA()(),e.TgZ(365,"td",83)(366,"label",58),e._uU(367,"15 x 4"),e._UZ(368,"br"),e._uU(369,"Intu"),e._UZ(370,"br"),e._uU(371,"Smoke "),e.qZA()(),e.TgZ(372,"td",83)(373,"label",58),e._uU(374,"20 x 4"),e._UZ(375,"br"),e._uU(376,"Intu Strip"),e.qZA()(),e.TgZ(377,"td",83)(378,"label",58),e._uU(379,"20 x 4"),e._UZ(380,"br"),e._uU(381,"Intu"),e._UZ(382,"br"),e._uU(383," Smoke"),e.qZA()(),e.TgZ(384,"td",83)(385,"label",58),e._uU(386,"Drop"),e._UZ(387,"br"),e._uU(388,"Down"),e._UZ(389,"br"),e._uU(390,"Seals"),e.qZA()(),e.TgZ(391,"td",83)(392,"label",58),e._uU(393,"Weather"),e._UZ(394,"br"),e._uU(395,"Seals"),e.qZA()()(),e.TgZ(396,"tr")(397,"td",84)(398,"input",95),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_strip_10_4=i}),e.qZA()(),e.TgZ(399,"td",84)(400,"input",96),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_smoke_10_4=i}),e.qZA()(),e.TgZ(401,"td",84)(402,"input",97),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_strip_15_4=i}),e.qZA()(),e.TgZ(403,"td",84)(404,"input",98),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_smoke_15_4=i}),e.qZA()(),e.TgZ(405,"td",84)(406,"input",99),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_strip_20_4=i}),e.qZA()(),e.TgZ(407,"td",84)(408,"input",100),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.intu_smoke_20_4=i}),e.qZA()(),e.TgZ(409,"td",84)(410,"input",101),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.drop_down_seals=i}),e.qZA()(),e.TgZ(411,"td",84)(412,"input",102),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.properties.weather_seals=i}),e.qZA()()()(),e._UZ(413,"div",103),e.TgZ(414,"table",55)(415,"tr")(416,"th",104)(417,"label",58),e._uU(418,"Site Contact:"),e.qZA()(),e.TgZ(419,"th",104)(420,"label",58),e._uU(421,"Site Number:"),e.qZA()()(),e.TgZ(422,"tr")(423,"td",105)(424,"input",106),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.site_contact=i}),e.qZA()(),e.TgZ(425,"td",105)(426,"input",107),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.site_number=i}),e.qZA()()()(),e._UZ(427,"div",103),e.TgZ(428,"table",55)(429,"tr")(430,"th",108)(431,"label",58),e._uU(432,"Other / Notes"),e.qZA()()(),e.TgZ(433,"tr")(434,"td",75)(435,"textarea",109),e.NdJ("ngModelChange",function(i){return n.deliveryOrder.other_notes=i}),e.qZA()()()()(),e.TgZ(436,"div",8)(437,"div",7)(438,"a",10),e.NdJ("click",function(){return n.redirectBack()}),e._uU(439," Discard"),e.qZA(),e.YNc(440,j,2,0,"a",11),e.YNc(441,z,2,0,"a",11),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",!n.currentDeliveryNote),e.xp6(1),e.Q6J("ngIf",n.currentDeliveryNote),e.xp6(3),e.hij("Week ",e.xi3(9,66,n.dateToday,"ww"),""),e.xp6(5),e.Q6J("ngIf",n.currentDeliveryNote),e.xp6(3),e.Q6J("ngIf",!n.currentDeliveryNote&&n._auth.checkPermissions("rod","write")),e.xp6(1),e.Q6J("ngIf",n.currentDeliveryNote&&n._auth.checkPermissions("rod","write")),e.xp6(1),e.Q6J("ngIf",n.currentDeliveryNote&&n._auth.checkPermissions("rod","write")),e.xp6(11),e.Q6J("ngForOf",n.deliveryNotes),e.xp6(14),e.Oqu(n.workOrder.customer.name),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.ticket_no),e.xp6(3),e.Q6J("ngModel",n.deliveryOrder.invoice_to),e.xp6(9),e.Q6J("ngModel",n.deliveryOrder.dispatch_date),e.xp6(7),e.Q6J("ngModel",n.deliveryOrder.order_number),e.xp6(8),e.Q6J("ngForOf",n.deliveryOrder.work_orders),e.xp6(9),e.Q6J("ngIf",n.deliveryOrder.fsc),e.xp6(39),e.Q6J("ngModel",n.deliveryOrder.properties.flush_door),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.frames),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.stops),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.architraves),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.timber_sections),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.hinges),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.glass_pcs),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.glazing_beads),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.hinge_packers),e.xp6(55),e.Q6J("ngModel",n.deliveryOrder.properties.intu_strip_10_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_smoke_10_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_strip_15_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_smoke_15_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_strip_20_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_smoke_20_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.drop_down_seals),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.weather_seals),e.xp6(12),e.Q6J("ngModel",n.deliveryOrder.site_contact),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.site_number),e.xp6(9),e.Q6J("ngModel",n.deliveryOrder.other_notes),e.xp6(14),e.Oqu(n.workOrder.customer.name),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.ticket_no),e.xp6(3),e.Q6J("ngModel",n.deliveryOrder.invoice_to),e.xp6(9),e.Q6J("ngModel",n.deliveryOrder.dispatch_date),e.xp6(7),e.Q6J("ngModel",n.deliveryOrder.order_number),e.xp6(10),e.Q6J("ngForOf",n.customerOrders),e.xp6(2),e.Q6J("ngForOf",n.deliveryOrder.work_orders),e.xp6(10),e.Q6J("checked",n.deliveryOrder.fsc)("ngModel",n.deliveryOrder.fsc),e.xp6(42),e.Q6J("ngModel",n.deliveryOrder.properties.flush_door),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.frames),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.stops),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.architraves),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.timber_sections),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.hinges),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.glass_pcs),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.glazing_beads),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.hinge_packers),e.xp6(55),e.Q6J("ngModel",n.deliveryOrder.properties.intu_strip_10_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_smoke_10_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_strip_15_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_smoke_15_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_strip_20_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.intu_smoke_20_4),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.drop_down_seals),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.properties.weather_seals),e.xp6(12),e.Q6J("ngModel",n.deliveryOrder.site_contact),e.xp6(2),e.Q6J("ngModel",n.deliveryOrder.site_number),e.xp6(9),e.Q6J("ngModel",n.deliveryOrder.other_notes),e.xp6(5),e.Q6J("ngIf",!n.currentDeliveryNote&&n._auth.checkPermissions("rod","write")),e.xp6(1),e.Q6J("ngIf",n.currentDeliveryNote&&n._auth.checkPermissions("rod","write")))},directives:[_.O5,U,_.sg,_.mk,s.Fj,s.JJ,s.On,s.YN,s.Kr,C.u,s.Wl],pipes:[_.uU],styles:[".custom-select-work-orders[_ngcontent-%COMP%]{width:100%;border:none;background:none;-webkit-appearance:none;appearance:none}.ticket-d-detail.active[_ngcontent-%COMP%] > .view-dis[_ngcontent-%COMP%]{visibility:hidden;display:block!important}.dispatch-table-buttons[_ngcontent-%COMP%]{width:40rem;align-items:flex-end;display:flex;justify-content:end}@media print{.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%], .daspatch-table[_ngcontent-%COMP%]   .table-head[_ngcontent-%COMP%], .daspatch-table[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]{border:2px solid black}.daspatch-table[_ngcontent-%COMP%]   .table-data.table-sec-data[_ngcontent-%COMP%]{padding:0}.daspatch-table[_ngcontent-%COMP%]   .table-inner[_ngcontent-%COMP%]{width:100%}.daspatch-table[_ngcontent-%COMP%]   .table-inner[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .daspatch-table[_ngcontent-%COMP%]   .table-inner[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:2px solid black}.daspatch-table[_ngcontent-%COMP%]   .table-inner[_ngcontent-%COMP%]   .table-data-inner[_ngcontent-%COMP%]:first-child{border-top:none;border-left:none;border-right:none}.daspatch-table[_ngcontent-%COMP%]   .table-inner[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   .table-data-inner[_ngcontent-%COMP%]:last-child{border-bottom:none}.daspatch-table[_ngcontent-%COMP%]   .table-inner[_ngcontent-%COMP%]   .table-inner-data[_ngcontent-%COMP%]{padding:0}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400;color:#000;width:100%;overflow-y:auto;border:none;overflow-x:unset;white-space:pre-line;resize:unset}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#DC0100}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#1C1C1C}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]::placeholder{font-size:1.3rem;font-weight:400;color:#000}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea-sec-2[_ngcontent-%COMP%]:focus-visible{outline:none}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400;color:#000;width:100%;height:16rem;overflow-y:auto;border:none;overflow-x:unset;white-space:pre-line;resize:unset}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#DC0100}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#1C1C1C}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]::placeholder{font-size:1.3rem;font-weight:400;color:#000}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .ctm-textarea[_ngcontent-%COMP%]:focus-visible{outline:none}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.3rem 1rem}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem 1rem}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .input-setts[_ngcontent-%COMP%]{width:100%;display:flex;white-space:nowrap}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .invoice-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#000;margin-bottom:0;padding-right:5px}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400;color:#000;margin-bottom:0;border:none;width:100%}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]::placeholder{font-size:1.3rem;font-weight:400;color:#000}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .invoice-ctm[_ngcontent-%COMP%]{border:none;width:100%}.daspatch-table[_ngcontent-%COMP%]   .table-dis[_ngcontent-%COMP%]   .invoice-ctm[_ngcontent-%COMP%]:focus-visible{outline:none}.dispatch-text[_ngcontent-%COMP%]{font-size:9px;font-weight:400;color:#000;text-align:center;margin:1rem 0}.dispatch-check[_ngcontent-%COMP%]{width:60%;margin:0 auto 1.6rem}.dispatch-check[_ngcontent-%COMP%]   .pro-dispath[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#000;display:flex;align-items:center;margin-bottom:0}.dispatch-check[_ngcontent-%COMP%]   .custom-check[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{top:-1rem;border-radius:.4rem;height:2rem;width:2rem}.dispatch-check[_ngcontent-%COMP%]   .custom-check[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:.6rem;top:.2rem;width:.6rem;height:1rem}.table-height-data[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{height:6.6rem}.table-height-data[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]::placeholder{font-style:italic;color:#b9b9b9!important}.dispatch-account[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#000;display:flex;align-items:center;justify-content:center;margin:1.2rem 0}.padds-py[_ngcontent-%COMP%]{padding:1.4rem 0;width:100%}}"]}),r})();var $=c(9330),b=c(9644),B=c(2027);function W(r,d){1&r&&(e.TgZ(0,"h4",8),e._uU(1,"ADD SALES ORDER"),e.qZA())}function V(r,d){1&r&&(e.TgZ(0,"h4",8),e._uU(1,"UPDATE SALES ORDER"),e.qZA())}function K(r,d){if(1&r&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&r){const t=d.$implicit;e.Q6J("value",d.index),e.xp6(1),e.Oqu(t.name)}}function G(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"span",38),e._uU(1),e.TgZ(2,"i-feather",39),e.NdJ("click",function(){const i=e.CHM(t).index;return e.oxw(2).removeProduct(i)}),e.qZA()()}if(2&r){const t=d.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function X(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"li",42),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(3).selectCustomer(i)}),e._uU(1),e.qZA()}if(2&r){const t=d.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ee(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",40)(1,"ul"),e.YNc(2,X,2,1,"li",41),e.TgZ(3,"li",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).selectCustomer("new")}),e._uU(4,"Add Customer"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.customers)}}function te(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"label",14)(3,"span",43),e._uU(4,"[W/O]"),e.qZA(),e._uU(5),e.TgZ(6,"span",15),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"input",44),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.quantity=o}),e.qZA()()()}if(2&r){const t=d.$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(3),e.Q6J("ngModel",t.quantity)}}function ne(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"label",14),e._uU(6,"Product"),e.TgZ(7,"span",15),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"select",16),e.NdJ("change",function(o){return e.CHM(t),e.oxw().selectProduct(o)}),e.TgZ(10,"option",17),e._uU(11,"Select Product"),e.qZA(),e.YNc(12,K,2,2,"option",18),e.qZA()()(),e.TgZ(13,"div",19),e.YNc(14,G,3,1,"span",20),e.qZA()()(),e.TgZ(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",21),e.NdJ("focusout",function(){return e.CHM(t),e.oxw().customerInputOut()}),e.TgZ(19,"label",14),e._uU(20,"Customers"),e.TgZ(21,"span",15),e._uU(22,"*"),e.qZA()(),e.TgZ(23,"input",22),e.NdJ("input",function(o){return e.CHM(t),e.oxw().searchCustomer(o)})("focus",function(){return e.CHM(t),e.oxw().customerInput=!0})("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedCustomer=o}),e.qZA(),e.YNc(24,ee,5,1,"div",23),e._UZ(25,"i-feather",24),e.qZA()()()(),e.YNc(26,te,9,2,"div",25),e.TgZ(27,"div",26)(28,"div",11)(29,"label",14),e._uU(30,"Contract"),e.TgZ(31,"span",15),e._uU(32,"*"),e.qZA()(),e.TgZ(33,"input",27),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().workOrder.contract=o}),e.qZA()()(),e.TgZ(34,"div",10)(35,"div",11)(36,"label",14),e._uU(37,"Customer Order#"),e.TgZ(38,"span",15),e._uU(39,"*"),e.qZA()(),e.TgZ(40,"input",28),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().workOrder.order_number=o}),e.qZA()()(),e.TgZ(41,"div",10)(42,"div",11)(43,"label",14),e._uU(44,"Location"),e.TgZ(45,"span",15),e._uU(46,"*"),e.qZA()(),e.TgZ(47,"input",29),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().workOrder.location=o}),e.qZA()()(),e.TgZ(48,"div",10)(49,"div",11)(50,"label",14),e._uU(51,"Schedule Ref"),e.qZA(),e.TgZ(52,"input",30),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().workOrder.schedule_ref=o}),e.qZA()()(),e.TgZ(53,"div",10)(54,"div",31)(55,"h3",32),e._uU(56,"FSC:"),e.qZA(),e.TgZ(57,"div",33)(58,"label",34)(59,"input",35),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().workOrder.fsc=o}),e.qZA(),e._UZ(60,"span",36),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.products),e.xp6(2),e.Q6J("ngForOf",t.selectedProducts),e.xp6(9),e.Q6J("ngModel",t.selectedCustomer),e.xp6(1),e.Q6J("ngIf",t.customerInput),e.xp6(2),e.Q6J("ngForOf",t.selectedProducts),e.xp6(7),e.Q6J("ngModel",t.workOrder.contract),e.xp6(7),e.Q6J("ngModel",t.workOrder.order_number),e.xp6(7),e.Q6J("ngModel",t.workOrder.location),e.xp6(5),e.Q6J("ngModel",t.workOrder.schedule_ref),e.xp6(7),e.Q6J("ngModel",t.workOrder.fsc)}}function oe(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"li",42),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(3).selectCustomer(i)}),e._uU(1),e.qZA()}if(2&r){const t=d.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function re(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",40)(1,"ul"),e.YNc(2,oe,2,1,"li",41),e.TgZ(3,"li",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).selectCustomer("new")}),e._uU(4,"Add Customer"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.customers)}}function ie(r,d){if(1&r&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&r){const t=d.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function de(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"label",14),e._uU(4,"Work Order#"),e.TgZ(5,"span",15),e._uU(6,"*"),e.qZA()(),e.TgZ(7,"input",45),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.work_number=o}),e.qZA()()(),e.TgZ(8,"div",10)(9,"div",11)(10,"div",12)(11,"div",21),e.NdJ("focusout",function(){return e.CHM(t),e.oxw().customerInputOut()}),e.TgZ(12,"label",14),e._uU(13,"Customers"),e.TgZ(14,"span",15),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"input",22),e.NdJ("input",function(o){return e.CHM(t),e.oxw().searchCustomer(o)})("focus",function(){return e.CHM(t),e.oxw().customerInput=!0})("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedCustomer=o}),e.qZA(),e.YNc(17,re,5,1,"div",23),e._UZ(18,"i-feather",24),e.qZA()()()(),e.TgZ(19,"div",10)(20,"div",11)(21,"label",14),e._uU(22,"Product"),e.TgZ(23,"span",15),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"select",46),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.product_id=o}),e.YNc(26,ie,2,2,"option",18),e.qZA()()(),e.TgZ(27,"div",10)(28,"div",11)(29,"label",14),e._uU(30,"Quantity"),e.TgZ(31,"span",15),e._uU(32,"*"),e.qZA()(),e.TgZ(33,"input",47),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.quantity=o}),e.qZA()()(),e.TgZ(34,"div",10)(35,"div",11)(36,"label",14),e._uU(37,"Customer Order Number#"),e.TgZ(38,"span",15),e._uU(39,"*"),e.qZA()(),e.TgZ(40,"input",48),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.order_number=o}),e.qZA()()(),e.TgZ(41,"div",10)(42,"div",11)(43,"label",14),e._uU(44,"Contract"),e.TgZ(45,"span",15),e._uU(46,"*"),e.qZA()(),e.TgZ(47,"input",49),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.contract=o}),e.qZA()()(),e.TgZ(48,"div",10)(49,"div",11)(50,"label",14),e._uU(51,"Due Date"),e.TgZ(52,"span",15),e._uU(53,"*"),e.qZA()(),e.TgZ(54,"div",50)(55,"input",51),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.due_date=o}),e.qZA()()()(),e.TgZ(56,"div",10)(57,"div",11)(58,"label",14),e._uU(59,"Invoice"),e.TgZ(60,"span",15),e._uU(61,"*"),e.qZA()(),e.TgZ(62,"input",52),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.invoice_no=o}),e.qZA()()(),e.TgZ(63,"div",10)(64,"div",11)(65,"label",14),e._uU(66,"Schedule Ref"),e.TgZ(67,"span",15),e._uU(68,"*"),e.qZA()(),e.TgZ(69,"input",53),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.schedule_ref=o}),e.qZA()()(),e.TgZ(70,"div",10)(71,"div",31)(72,"h3",32),e._uU(73,"FSC:"),e.qZA(),e.TgZ(74,"div",33)(75,"label",34)(76,"input",54),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().updateOrder.fsc=o}),e.qZA(),e._UZ(77,"span",36),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.updateOrder.work_number),e.xp6(9),e.Q6J("ngModel",t.selectedCustomer),e.xp6(1),e.Q6J("ngIf",t.customerInput),e.xp6(8),e.Q6J("ngModel",t.updateOrder.product_id),e.xp6(1),e.Q6J("ngForOf",t.products),e.xp6(7),e.Q6J("ngModel",t.updateOrder.quantity),e.xp6(7),e.Q6J("ngModel",t.updateOrder.order_number),e.xp6(7),e.Q6J("ngModel",t.updateOrder.contract),e.xp6(8),e.Q6J("ngModel",t.updateOrder.due_date)("min",t.currentDate),e.xp6(7),e.Q6J("ngModel",t.updateOrder.invoice_no),e.xp6(7),e.Q6J("ngModel",t.updateOrder.schedule_ref),e.xp6(7),e.Q6J("checked",t.order.fsc)("ngModel",t.updateOrder.fsc)}}function ae(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSalesOrder()}),e._uU(1,"Add"),e.qZA()}}function se(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateSalesOrder()}),e._uU(1,"Update"),e.qZA()}}let w=(()=>{class r{constructor(t,n,o,i){this._rod=t,this.helper=n,this._modal=o,this._phonebook=i,this.response=new e.vpe,this.products=[],this.selectedProducts=[],this.customers=[],this.workOrder={products:this.selectedProducts,customer_id:0,location:"",contract:"",fsc:!1,order_number:"",schedule_ref:""},this.modalConfig={animated:!0,keyboard:!1,backdrop:!1,ignoreBackdropClick:!0,windowClass:"modal-roles"},this.currentDate="",this.customerInput=!1,this.selectedCustomer=""}ngOnInit(){this.updateOrderObj(),this.getProductsListing(),this.getCustomerListing()}updateOrderObj(){var t,n,o,i,a,l,p,u,g,x,T,M,y;this.updateOrder={id:null===(t=this.order)||void 0===t?void 0:t.id,work_number:null===(n=this.order)||void 0===n?void 0:n.work_number,invoice_no:null===(o=this.order)||void 0===o?void 0:o.invoice_no,schedule_ref:null===(i=this.order)||void 0===i?void 0:i.schedule_ref,status:null===(a=this.order)||void 0===a?void 0:a.status,quantity:null===(l=this.order)||void 0===l?void 0:l.quantity,product_id:null===(p=this.order)||void 0===p?void 0:p.product_id,customer_id:null===(u=this.order)||void 0===u?void 0:u.customer_id,location:null===(g=this.order)||void 0===g?void 0:g.location,contract:null===(x=this.order)||void 0===x?void 0:x.contract,fsc:null===(T=this.order)||void 0===T?void 0:T.fsc,order_number:null===(M=this.order)||void 0===M?void 0:M.order_number,due_date:null===(y=this.order)||void 0===y?void 0:y.due_date}}getProductsListing(){this._rod.productsListing().subscribe(t=>{this.products=t.data})}getCustomerListing(){this._rod.getCustomersListing().subscribe(t=>{this.customers=t.data.data,"edit"==this.type&&(this.selectedCustomer=this.order.customer.name)})}cancel(){this.response.emit({success:!1})}addSalesOrder(){this.validateAddForm()&&this._rod.storeWorkOrder(this.workOrder).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0})})}updateSalesOrder(){this.validateUpdateForm()&&this._rod.updateWorkOrder(this.updateOrder).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0,data:t.data})})}selectProduct(t){let n=this.products[t.target.value];t.target.value="select",this.selectedProducts.find(o=>o.id==n.id)||this.selectedProducts.push({id:n.id,name:n.name,quantity:""})}searchCustomer(t){(t.target.value.length>=3||0==t.target.value.length)&&(this.searchSubscription&&this.searchSubscription.unsubscribe(),this.searchSubscription=this._rod.getCustomersListing({search:t.target.value}).subscribe(n=>{this.customers=n.data.data}))}removeProduct(t){this.selectedProducts.splice(t,1)}selectCustomer(t){if("new"==t){const n=this._modal.open($.y,this.modalConfig);n.componentInstance.response.subscribe(o=>{o.success&&(this.customers.push(o.data),"add"==this.type?this.workOrder.customer_id=o.data.id:this.updateOrder.customer_id=o.data.id,this.selectedCustomer=o.data.name),n.dismiss()})}else"add"==this.type?this.workOrder.customer_id=t.id:this.updateOrder.customer_id=t.id,this.selectedCustomer=t.name;this.customerInputOut()}validateAddForm(){if(!this.workOrder.products.length)return this.helper.toastError("Please select product"),!1;if(!this.workOrder.customer_id)return this.helper.toastError("Please select customer"),!1;let t=this.workOrder.products.find(n=>0==n.quantity);return t?(this.helper.toastError("Please enter quantity for "+t.name),!1):this.workOrder.contract.length?this.workOrder.order_number.length?!!this.workOrder.location.length||(this.helper.toastError("Please enter location"),!1):(this.helper.toastError("Please enter customer order number"),!1):(this.helper.toastError("Please enter contract details"),!1)}validateUpdateForm(){return this.updateOrder.product_id?this.updateOrder.quantity?this.updateOrder.contract.length?this.updateOrder.order_number.length?!!this.updateOrder.location.length||(this.helper.toastError("Please enter location"),!1):(this.helper.toastError("Please enter customer order number"),!1):(this.helper.toastError("Please enter contract details"),!1):(this.helper.toastError("Please enter product quantity"),!1):(this.helper.toastError("Please select product"),!1)}customerInputOut(){setTimeout(()=>{this.customerInput=!1},200)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.W),e.Y36(f.B),e.Y36(b.FF),e.Y36(B.Q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-edit-sales-order"]],inputs:{order:"order",type:"type"},outputs:{response:"response"},decls:12,vars:6,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["class","row",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0)",1,"discard-btn",3,"click"],["href","javascript:void(0)","class","add-btn",3,"click",4,"ngIf"],[1,"modal-title"],[1,"row"],[1,"col-md-6"],[1,"input-style","mb-2"],[1,"select-box"],[1,"form-group"],[1,"d-block"],[1,"text-danger"],["placeholder","Change Action",1,"ctm-input","bg-white",3,"change"],["value","select","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap"],["class","fiels-ctm",4,"ngFor","ngForOf"],[1,"form-group","position-relative",3,"focusout"],["type","text","placeholder","Customer",1,"ctm-input","type-input",3,"ngModel","input","focus","ngModelChange"],["class","custom-dropdown-list",4,"ngIf"],["name","search",1,"input-icon"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-12"],["type","text","placeholder","Contract Name","name","contract",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Customer Order#","name","order_number",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Location","name","location",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Schedule Ref","name","schedule_ref",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],[1,"d-flex","align-items-center","check-box-rod-modal","justify-content-between"],[1,"fsc-text"],[1,"remember-me"],[1,"custom-check","custom-check-r"],["type","checkbox","checked","checked",3,"ngModel","ngModelChange"],[1,"checkmark"],[3,"value"],[1,"fiels-ctm"],["name","X",1,"remove-product",3,"click"],[1,"custom-dropdown-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"red-label"],["type","text","placeholder","Enter quantity",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","A01","readonly","","name","work_number",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["placeholder","Select Customer",1,"ctm-input","bg-white",3,"ngModel","ngModelChange"],["type","number","placeholder","100",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Wan043",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Charing Cross Hospital",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],[1,"type-pass"],["type","date","placeholder","23/10/2021",1,"ctm-input",3,"ngModel","min","ngModelChange"],["type","text","placeholder","41109",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","text","placeholder","Gd12-19",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["type","checkbox",3,"checked","ngModel","ngModelChange"],["href","javascript:void(0)",1,"add-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,W,2,0,"h4",1),e.YNc(2,V,2,0,"h4",1),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,ne,61,10,"div",3),e.YNc(5,de,78,14,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"a",6),e.NdJ("click",function(){return n.cancel()}),e._uU(9,"Discard"),e.qZA(),e.YNc(10,ae,2,0,"a",7),e.YNc(11,se,2,0,"a",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","add"==n.type),e.xp6(1),e.Q6J("ngIf","edit"==n.type),e.xp6(2),e.Q6J("ngIf","add"==n.type),e.xp6(1),e.Q6J("ngIf","edit"==n.type),e.xp6(5),e.Q6J("ngIf","add"==n.type),e.xp6(1),e.Q6J("ngIf","edit"==n.type))},directives:[_.O5,s.YN,s.Kr,_.sg,C.u,s.Fj,s.JJ,s.On,s.Wl,s.EJ,s.wV],styles:[".remove-product[_ngcontent-%COMP%]{color:#fff;width:15px;height:15px;margin-left:5px;cursor:pointer}.search-position-modal[_ngcontent-%COMP%]{position:absolute;right:1.6rem!important}"]}),r})();var le=c(2212),ce=c(5860),_e=c(88);function pe(r,d){1&r&&(e.TgZ(0,"h4",8),e._uU(1,"UPDATE BULK INVOICE NO"),e.qZA())}function ue(r,d){1&r&&(e.TgZ(0,"h4",8),e._uU(1,"UPDATE BULK SCHEDULE REF"),e.qZA())}function ge(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",11)(4,"label",12),e._uU(5,"Invoice No"),e.TgZ(6,"span",13),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"input",14),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().invoiceNo=o}),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.invoiceNo)}}function he(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",11)(4,"label",12),e._uU(5,"Schedule Ref"),e.TgZ(6,"span",13),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"input",14),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().scheduleRef=o}),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.scheduleRef)}}function me(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().UpdateInvoiceNo()}),e._uU(1,"Update"),e.qZA()}}function fe(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateScheduleRef()}),e._uU(1,"Update"),e.qZA()}}let Ce=(()=>{class r{constructor(t,n){this.helper=t,this._rod=n,this.response=new e.vpe}ngOnInit(){}UpdateInvoiceNo(){this.response.emit({success:!0,type:this.type,data:this.invoiceNo})}cancel(){this.response.emit({success:!1})}updateScheduleRef(){this.response.emit({success:!0,type:this.type,data:this.scheduleRef})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.B),e.Y36(m.W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-update-invoice-schedule-ref"]],inputs:{type:"type"},outputs:{response:"response"},decls:12,vars:6,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["class","row",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0)",1,"discard-btn",3,"click"],["href","javascript:void(0)","class","add-btn",3,"click",4,"ngIf"],[1,"modal-title"],[1,"row"],[1,"col-md-12"],[1,"input-style","mb-2"],[1,"d-block"],[1,"text-danger"],["type","text","placeholder","Gd12-19",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["href","javascript:void(0)",1,"add-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,pe,2,0,"h4",1),e.YNc(2,ue,2,0,"h4",1),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,ge,9,1,"div",3),e.YNc(5,he,9,1,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"a",6),e.NdJ("click",function(){return n.cancel()}),e._uU(9,"Discard"),e.qZA(),e.YNc(10,me,2,0,"a",7),e.YNc(11,fe,2,0,"a",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","invoice_no"==n.type),e.xp6(1),e.Q6J("ngIf","schedule_ref"==n.type),e.xp6(2),e.Q6J("ngIf","invoice_no"==n.type),e.xp6(1),e.Q6J("ngIf","schedule_ref"==n.type),e.xp6(5),e.Q6J("ngIf","invoice_no"==n.type),e.xp6(1),e.Q6J("ngIf","schedule_ref"==n.type))},directives:[_.O5,s.Fj,s.JJ,s.On],styles:[""]}),r})();var ve=c(1628);function Ze(r,d){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const t=d.$implicit;e.xp6(2),e.Oqu(t.work_number),e.xp6(2),e.Oqu(t.customer.name),e.xp6(2),e.Oqu(t.order_number),e.xp6(2),e.Oqu(t.product.name),e.xp6(2),e.hij("",t.progress,"%")}}function be(r,d){if(1&r&&(e.TgZ(0,"tbody"),e.YNc(1,Ze,11,5,"tr",23),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.data?null:t.data.model)}}function xe(r,d){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const t=d.$implicit;e.xp6(2),e.Oqu(t.work_number),e.xp6(2),e.Oqu(t.customer.name),e.xp6(2),e.Oqu(t.order_number),e.xp6(2),e.Oqu(t.product.name),e.xp6(2),e.hij("",t.progress,"%")}}function Te(r,d){if(1&r&&(e.TgZ(0,"tbody"),e.YNc(1,xe,11,5,"tr",23),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.data?null:t.data.model)}}function Me(r,d){1&r&&(e.TgZ(0,"div",5)(1,"p",24),e._uU(2,"Notify To"),e.qZA()())}function ye(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"label",29),e._uU(5),e.TgZ(6,"input",30),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.status=o}),e.qZA(),e._UZ(7,"span",31),e.qZA()()()()()}if(2&r){const t=d.$implicit;e.xp6(5),e.hij("",t.name," "),e.xp6(1),e.Q6J("checked",t.status)("ngModel",t.status)}}function Oe(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",32)(2,"div",33)(3,"textarea",34),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().reason=o}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.reason)}}function ke(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",35)(2,"label",36),e._uU(3,"Due Date"),e.TgZ(4,"span",37),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"input",38),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().dueDate=o}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.dueDate)}}function Ae(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"p")(2,"i",43),e.NdJ("click",function(){const i=e.CHM(t).index;return e.oxw(2).removeAttachment(i)}),e.qZA(),e._uU(3),e.qZA()()}if(2&r){const t=d.$implicit;e.xp6(3),e.hij(" ",t.name,"")}}function we(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",39)(1,"label",40),e._UZ(2,"i",41),e._uU(3," Add Attachments "),e.qZA(),e.YNc(4,Ae,4,1,"div",23),e.TgZ(5,"input",42),e.NdJ("change",function(o){return e.CHM(t),e.oxw().addAttachment(o)}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.attachments)}}function Ue(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",35)(2,"label",36),e._uU(3,"Schedule Ref"),e.qZA(),e.TgZ(4,"input",44),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().scheduleRef=o}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.scheduleRef)}}function Ne(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateBulk()}),e._uU(1,"Confirm"),e.qZA()}}function qe(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateStatus()}),e._uU(1,"Confirm"),e.qZA()}}let v=(()=>{class r{constructor(t,n,o,i){this._rod=t,this.helper=n,this._admin=o,this.datePipe=i,this.rods=[],this.type="single",this.response=new e.vpe,this.notify=[],this.reason="",this.notifyStatus=["On Hold"],this.attachmentStatus=["To Factory"],this.reasonStatus=["On Hold"],this.dueDateStatus=["To Factory"],this.scheduleRefStatus=["To Factory"],this.scheduleRef="",this.formData=new FormData,this.attachments=[]}ngOnInit(){this.dueDate=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.scheduleRef=this.data.model[0]?this.data.model[0].schedule_ref:"",this.getRoles()}getRoles(){this.notifyStatus.includes(this.data.to)&&this._admin.rolesListing().subscribe(t=>{t.data.forEach(n=>{this.notify.push({id:n.id,name:n.title,status:!1})})})}cancel(){this.response.emit({success:!1,data:this.data.model[0]})}updateStatus(){this.formData.set("id",this.data.model[0].id),this.formData.delete("notify[]"),this.notify.forEach(t=>{t.status&&this.formData.append("notify[]",t.id)}),this.formData.set("reason",this.reason),this.formData.set("on_hold",this.data.hold?"1":"0"),this.formData.set("status",this.data.status),this.formData.set("due_date",this.dueDate),this.formData.set("schedule_ref",this.scheduleRef),this._rod.updateOrderStatus(this.formData).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0,data:t.data})})}addAttachment(t){for(let n=0;n<t.target.files.length;n++){const o=t.target.files[n];this.formData.append("attachment[]",o,o.name),null==this.attachments.find(i=>i.name==o.name)&&this.attachments.push(o)}}removeAttachment(t){this.formData.delete("attachment[]"),this.attachments.splice(t,1),this.attachments.forEach(n=>{this.formData.append("attachment[]",n,n.name)})}updateBulk(){this.formData.delete("id[]"),this.data.model.forEach(t=>{this.formData.append("id[]",t.id)}),this.notify.forEach(t=>{t.status&&this.formData.append("notify[]",t.id)}),this.formData.set("reason",this.reason),this.formData.set("on_hold",this.data.hold?"1":"0"),this.formData.set("status",this.data.status),this.formData.set("due_date",this.dueDate),this.formData.set("schedule_ref",this.scheduleRef),this._rod.bulkStatusUpdate(this.formData).subscribe(t=>{this.helper.toastSuccess(t.message),this.response.emit({success:!0})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.W),e.Y36(f.B),e.Y36(ve.E),e.Y36(_.uU))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-update-status"]],inputs:{data:"data",rods:"rods",bulkStatus:"bulkStatus",type:"type"},outputs:{response:"response"},decls:51,vars:14,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"modal-table","table-responsive"],[1,"table"],[4,"ngIf"],[1,"booked-arrow","d-flex","align-items-center","justify-content-between"],[1,"booked-text"],[1,"booked-images"],["src","assets/img/arrow-left.svg","alt","img",1,"img-fluid"],[1,"fsc-para-box"],[1,"para"],[1,"second-text"],["class","col-md-12",4,"ngIf"],["class","col-md-6",4,"ngFor","ngForOf"],["class","col-md-12 align-items-end d-flex flex-column",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0) ",1,"discard-btn",3,"click"],["href","javascript:void(0) ","class","add-btn ",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"permission"],[1,"col-md-6"],[1,"notify-checkbox-sec"],[1,"check-box-rod-modal"],[1,"remember-me"],[1,"custom-check","custom-check-r"],["type","checkbox",3,"checked","ngModel","ngModelChange"],[1,"checkmark"],[1,"text-area-modal"],[1,"input-style"],["placeholder","Add reason here",1,"ctm-textarea",3,"ngModel","ngModelChange"],[1,"input-style","mb-2"],[1,"d-block"],[1,"text-danger"],["type","date","placeholder","Due Date",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],[1,"col-md-12","align-items-end","d-flex","flex-column"],["for","upload-file","role","button",1,"d-block"],[1,"fa","fa-paperclip"],["type","file","id","upload-file","placeholder","Due Date","multiple","","accept","application/pdf, application/vnd.ms-excel, image/*",1,"d-none",3,"change"],["role","button",1,"fa","fa-times","mr-1",3,"click"],["type","text","placeholder","Schedule Ref",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],["href","javascript:void(0) ",1,"add-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"ARE YOU SURE?"),e.qZA(),e.TgZ(3,"button",2),e._uU(4,"\xd7"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th"),e._uU(13,"Work#"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Customer"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Order#"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Product"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Progress"),e.qZA()()(),e.YNc(22,be,2,1,"tbody",8),e.YNc(23,Te,2,1,"tbody",8),e.qZA()(),e.TgZ(24,"div",9)(25,"h2",10),e._uU(26),e.qZA(),e.TgZ(27,"div",11),e._UZ(28,"img",12),e.qZA(),e.TgZ(29,"h2",10),e._uU(30),e.qZA()(),e.TgZ(31,"div",13)(32,"p",14),e._uU(33," Are you sure about this. You\u2019re changing status "),e.TgZ(34,"span",15),e._uU(35),e.qZA(),e._uU(36," to "),e.TgZ(37,"span",15),e._uU(38),e.qZA()()()(),e.YNc(39,Me,3,0,"div",16),e.YNc(40,ye,8,3,"div",17),e.YNc(41,Oe,4,1,"div",16),e.YNc(42,ke,7,1,"div",16),e.YNc(43,we,6,1,"div",18),e.YNc(44,Ue,5,1,"div",16),e.qZA()(),e.TgZ(45,"div",19)(46,"div",20)(47,"a",21),e.NdJ("click",function(){return n.cancel()}),e._uU(48,"Cancel"),e.qZA(),e.YNc(49,Ne,2,0,"a",22),e.YNc(50,qe,2,0,"a",22),e.qZA()()),2&t&&(e.xp6(22),e.Q6J("ngIf",1==(null==n.data.model?null:n.data.model.length)),e.xp6(1),e.Q6J("ngIf",(null==n.data.model?null:n.data.model.length)>1),e.xp6(3),e.Oqu(n.data.from),e.xp6(4),e.Oqu(n.data.to),e.xp6(5),e.hij("\u201c",n.data.from,"\u201d"),e.xp6(3),e.hij("\u201c",n.data.to,"\u201d"),e.xp6(1),e.Q6J("ngIf",n.notifyStatus.includes(n.data.to)),e.xp6(1),e.Q6J("ngForOf",n.notify),e.xp6(1),e.Q6J("ngIf",n.reasonStatus.includes(n.data.to)),e.xp6(1),e.Q6J("ngIf",n.dueDateStatus.includes(n.data.to)),e.xp6(1),e.Q6J("ngIf",n.attachmentStatus.includes(n.data.to)&&!(null!=n.data.model.attachments&&n.data.model.attachments.length)),e.xp6(1),e.Q6J("ngIf",n.scheduleRefStatus.includes(n.data.to)),e.xp6(5),e.Q6J("ngIf","bulk"==n.type),e.xp6(1),e.Q6J("ngIf","single"==n.type))},directives:[_.O5,_.sg,s.Wl,s.JJ,s.On,s.Fj],styles:[""]}),r})();function Je(r,d){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",19)(10,"div",20),e._UZ(11,"span"),e.qZA(),e._uU(12),e.qZA()()),2&r){const t=d.$implicit;e.xp6(2),e.Oqu(t.work_number),e.xp6(2),e.Oqu(t.customer.name),e.xp6(2),e.Oqu(t.order_number),e.xp6(2),e.Oqu(t.product.name),e.xp6(3),e.Udp("width",t.progress,"%"),e.xp6(1),e.hij("",t.progress,"% ")}}let Pe=(()=>{class r{constructor(){this.data=[],this.response=new e.vpe,this.payload={ids:[],title:"",description:""},this.orders=[]}ngOnInit(){this.data.forEach(t=>{t.checked&&(this.orders.push(t),this.payload.ids.push(t.id))})}cancel(){this.response.emit({success:!1})}addJobNote(){this.response.emit({success:!0,data:this.payload})}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-multiple-job-notes"]],inputs:{data:"data"},outputs:{response:"response"},decls:41,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"modal-table","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"input-style","mb-2"],[1,"d-block"],["type","text","placeholder","Title",1,"ctm-input","type-input",3,"ngModel","ngModelChange"],[1,"text-area-modal"],[1,"input-style"],["placeholder","Description",1,"ctm-textarea",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-center","w-100"],["href","javascript:void(0) ",1,"discard-btn",3,"click"],["href","javascript:void(0) ",1,"add-btn",3,"click"],[1,"position-relative"],[1,"progress-cell-bar"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Add Job Notes"),e.qZA(),e.TgZ(3,"button",2),e._uU(4,"\xd7"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th"),e._uU(13,"Work#"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Customer"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Order#"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Product"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Progress"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,Je,13,7,"tr",8),e.qZA()()()(),e.TgZ(24,"div",5)(25,"div",9)(26,"label",10),e._uU(27,"Title"),e.qZA(),e.TgZ(28,"input",11),e.NdJ("ngModelChange",function(i){return n.payload.title=i}),e.qZA()()(),e.TgZ(29,"div",5)(30,"div",12)(31,"div",13)(32,"label",10),e._uU(33,"Description"),e.qZA(),e.TgZ(34,"textarea",14),e.NdJ("ngModelChange",function(i){return n.payload.description=i}),e.qZA()()()()()(),e.TgZ(35,"div",15)(36,"div",16)(37,"a",17),e.NdJ("click",function(){return n.cancel()}),e._uU(38,"Cancel"),e.qZA(),e.TgZ(39,"a",18),e.NdJ("click",function(){return n.addJobNote()}),e._uU(40,"Add"),e.qZA()()()),2&t&&(e.xp6(23),e.Q6J("ngForOf",n.orders),e.xp6(5),e.Q6J("ngModel",n.payload.title),e.xp6(6),e.Q6J("ngModel",n.payload.description))},directives:[_.sg,s.Fj,s.JJ,s.On],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}"]}),r})();var Se=c(8601);function De(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"a",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().multipleUpdate("invoice_no")}),e._UZ(2,"i-feather",34),e._uU(3," Invoice "),e.qZA(),e.TgZ(4,"a",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().multipleUpdate("schedule_ref")}),e._UZ(5,"i-feather",34),e._uU(6," Schedule Ref "),e.qZA(),e.TgZ(7,"a",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().addMultipleJobNote()}),e._UZ(8,"i-feather",34),e._uU(9," Job Note "),e.qZA()()}}function Ie(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSalesOrder()}),e._UZ(1,"i-feather",34),e._uU(2," Add Sales Order "),e.qZA()}}function Qe(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",38)(2,"div",39)(3,"select",40),e.NdJ("change",function(o){return e.CHM(t),e.oxw().bulkStatusUpdate(o)}),e.TgZ(4,"option",41),e._uU(5,"Bulk Status"),e.qZA(),e.TgZ(6,"option",42),e._uU(7,"Booked"),e.qZA(),e.TgZ(8,"option",43),e._uU(9,"To Factory"),e.qZA(),e.TgZ(10,"option",44),e._uU(11,"Delivered"),e.qZA(),e.TgZ(12,"option",45),e._uU(13,"Withdrawn"),e.qZA(),e.TgZ(14,"option",46),e._uU(15,"On Hold"),e.qZA(),e.TgZ(16,"option",47),e._uU(17,"Off Hold"),e.qZA()()()()()}}function Ee(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"th")(1,"div",48)(2,"label",49)(3,"input",50),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().checkAll=o})("change",function(){return e.CHM(t),e.oxw().selectAll()}),e.qZA(),e._UZ(4,"span",51),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("checked",t.checkAll)("ngModel",t.checkAll)}}function Fe(r,d){1&r&&e._UZ(0,"i",52)}function Re(r,d){1&r&&e._UZ(0,"i",53)}function Ye(r,d){1&r&&e._UZ(0,"i",52)}function He(r,d){1&r&&e._UZ(0,"i",53)}function je(r,d){1&r&&e._UZ(0,"i",52)}function ze(r,d){1&r&&e._UZ(0,"i",53)}function Le(r,d){1&r&&e._UZ(0,"i",52)}function $e(r,d){1&r&&e._UZ(0,"i",53)}function Be(r,d){1&r&&e._UZ(0,"i",52)}function We(r,d){1&r&&e._UZ(0,"i",53)}function Ve(r,d){1&r&&e._UZ(0,"i",52)}function Ke(r,d){1&r&&e._UZ(0,"i",53)}function Ge(r,d){1&r&&e._UZ(0,"i",52)}function Xe(r,d){1&r&&e._UZ(0,"i",53)}function et(r,d){1&r&&e._UZ(0,"i",52)}function tt(r,d){1&r&&e._UZ(0,"i",53)}function nt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"td")(1,"div",48)(2,"label",49)(3,"input",50),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().$implicit.checked=o})("change",function(){return e.CHM(t),e.oxw(2).selectOptions()}),e.qZA(),e._UZ(4,"span",51),e.qZA()()()}if(2&r){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("checked",t.checked)("ngModel",t.checked)}}function ot(r,d){1&r&&(e.TgZ(0,"option",47),e._uU(1,"Off Hold"),e.qZA())}function rt(r,d){1&r&&(e.TgZ(0,"p",26),e._UZ(1,"i-feather",83),e.qZA())}function it(r,d){1&r&&(e.TgZ(0,"p",26),e._uU(1,"-"),e.qZA())}function dt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"input",84),e.NdJ("focusout",function(o){e.CHM(t);const i=e.oxw().index;return e.oxw().updateInvoiceNo(o,i)})("keyup",function(o){e.CHM(t);const i=e.oxw().index;return e.oxw().updateInvoiceNo(o,i)}),e.qZA()}if(2&r){const t=e.oxw(),o=t.$implicit;e.MGl("id","edit-invoice-no-",t.index,""),e.Q6J("value",o.invoice_no)}}function at(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"i-feather",87),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index;return e.oxw().editInvoiceNo(o)}),e.qZA()}}function st(r,d){if(1&r&&(e.TgZ(0,"p",85),e._uU(1,"- "),e.YNc(2,at,1,0,"i-feather",86),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t._auth.checkPermissions("rod","write"))}}function lt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"i-feather",87),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index;return e.oxw().editInvoiceNo(o)}),e.qZA()}}function ct(r,d){if(1&r&&(e.TgZ(0,"a",88),e._uU(1),e.YNc(2,lt,1,0,"i-feather",86),e.qZA()),2&r){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",t.invoice_no," "),e.xp6(1),e.Q6J("ngIf",n._auth.checkPermissions("rod","write"))}}const Z=function(r){return["delivery-notes",r]};function _t(r,d){if(1&r&&(e.TgZ(0,"a",89),e._uU(1,"Multiple"),e.qZA()),2&r){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,Z,t.id))}}function pt(r,d){if(1&r&&(e.TgZ(0,"a",85),e._uU(1," - "),e._UZ(2,"i-feather",90),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(1,Z,t.id))}}function ut(r,d){if(1&r&&(e.TgZ(0,"a",79),e._uU(1),e._UZ(2,"i-feather",91),e.qZA()),2&r){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,Z,t.id)),e.xp6(1),e.hij(" ",null==t.delivery_notes[0]?null:t.delivery_notes[0].ticket_no," ")}}function gt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"input",84),e.NdJ("focusout",function(o){e.CHM(t);const i=e.oxw().index;return e.oxw().updateScheduleRef(o,i)})("keyup",function(o){e.CHM(t);const i=e.oxw().index;return e.oxw().updateScheduleRef(o,i)}),e.qZA()}if(2&r){const t=e.oxw(),o=t.$implicit;e.MGl("id","edit-schedule-ref-",t.index,""),e.Q6J("value",o.schedule_ref)}}function ht(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"i-feather",87),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index;return e.oxw().editScheduleRef(o)}),e.qZA()}}function mt(r,d){if(1&r&&(e.TgZ(0,"p",92),e._uU(1,"- "),e.YNc(2,ht,1,0,"i-feather",86),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t._auth.checkPermissions("rod","write"))}}function ft(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"i-feather",87),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index;return e.oxw().editScheduleRef(o)}),e.qZA()}}function Ct(r,d){if(1&r&&(e.TgZ(0,"a",88),e._uU(1),e.YNc(2,ft,1,0,"i-feather",86),e.qZA()),2&r){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",t.schedule_ref," "),e.xp6(1),e.Q6J("ngIf",n._auth.checkPermissions("rod","write"))}}function vt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=o.$implicit,a=o.index;return e.oxw().addJobNote(i.id,a)}),e._UZ(1,"i-feather",93),e.qZA()}}function Zt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",94),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=o.$implicit,a=o.index;return e.oxw().addJobNote(i.id,a)}),e._uU(1," View "),e.qZA()}}function bt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",95)(1,"div",96)(2,"a",97),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=o.$implicit,a=o.index;return e.oxw().addJobNote(i.id,a)}),e._uU(3," Add Note "),e._UZ(4,"i-feather",98),e.qZA()(),e._UZ(5,"div",99),e.TgZ(6,"div",100),e._uU(7),e.ALo(8,"date"),e.qZA()()}if(2&r){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("innerHtml",t.latest_job_note.description,e.oJD),e.xp6(2),e.hij(" ",e.xi3(8,2,t.latest_job_note.created_at,"h:mm a | dd LLLL, yyyy")," ")}}function xt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=o.$implicit,a=o.index;return e.oxw().completeOrder(i,a)}),e._UZ(1,"i-feather",101),e.qZA()}}function Tt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=o.$implicit,a=o.index;return e.oxw().editSalesOrder(i,a)}),e._UZ(1,"i-feather",102),e.qZA()}}function Mt(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"a",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),i=o.$implicit,a=o.index;return e.oxw().deleteOrder(i,a)}),e._UZ(1,"i-feather",103),e.qZA()}}const yt=function(r,d){return{"order-withdrawn":r,"order-to-factory":d}};function Ot(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"tr",54),e.YNc(1,nt,5,2,"td",24),e.TgZ(2,"td")(3,"p",26),e._uU(4),e.qZA()(),e.TgZ(5,"td")(6,"p",26),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"p",26),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"p",26),e._uU(13),e.qZA()(),e.TgZ(14,"td")(15,"p",26),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"div",55)(19,"div",38)(20,"div",39)(21,"select",56),e.NdJ("change",function(o){const i=e.CHM(t),a=i.$implicit,l=i.index;return e.oxw().updateStatus(a,o,l)}),e.TgZ(22,"option",57),e._uU(23,"Booked"),e.qZA(),e.TgZ(24,"option",58),e._uU(25,"To Factory"),e.qZA(),e.TgZ(26,"option",59),e._uU(27,"In Factory"),e.qZA(),e.TgZ(28,"option",60),e._uU(29,"Withdrawn"),e.qZA(),e.TgZ(30,"option",61),e._uU(31,"Delivered"),e.qZA(),e.TgZ(32,"option",62),e._uU(33,"On Hold"),e.qZA(),e.YNc(34,ot,2,0,"option",63),e.qZA()()()()(),e.TgZ(35,"td",64)(36,"div",65),e._UZ(37,"span"),e.qZA(),e._uU(38),e.qZA(),e.TgZ(39,"td"),e.YNc(40,rt,2,0,"p",66),e.YNc(41,it,2,0,"p",66),e.qZA(),e.TgZ(42,"td")(43,"div",67),e.YNc(44,dt,1,2,"input",68),e.YNc(45,st,3,1,"p",69),e.YNc(46,ct,3,2,"a",70),e.qZA()(),e.TgZ(47,"td")(48,"div",67),e.YNc(49,_t,2,3,"a",71),e.YNc(50,pt,3,3,"a",69),e.YNc(51,ut,3,4,"a",72),e.qZA()(),e.TgZ(52,"td")(53,"div",67),e.YNc(54,gt,1,2,"input",68),e.YNc(55,mt,3,1,"p",73),e.YNc(56,Ct,3,2,"a",70),e.qZA()(),e.TgZ(57,"td")(58,"div",74),e.YNc(59,vt,2,0,"a",75),e.YNc(60,Zt,2,0,"a",76),e.YNc(61,bt,9,5,"div",77),e.qZA()(),e.TgZ(62,"td")(63,"div",78)(64,"a",79),e._UZ(65,"i-feather",80),e.qZA(),e.TgZ(66,"a",81),e.NdJ("click",function(){const o=e.CHM(t),i=o.$implicit,a=o.index;return e.oxw().viewTimeline(i,a)}),e._UZ(67,"i-feather",82),e.qZA(),e.YNc(68,xt,2,0,"a",75),e.YNc(69,Tt,2,0,"a",75),e.YNc(70,Mt,2,0,"a",75),e.qZA()()()}if(2&r){const t=d.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(42,yt,"Withdrawn"==t.status||t.on_hold,"To Factory"==t.status&&!t.on_hold)),e.xp6(1),e.Q6J("ngIf",n._auth.checkPermissions("rod","write")),e.xp6(3),e.Oqu(t.work_number),e.xp6(3),e.Oqu(t.customer.name),e.xp6(3),e.Oqu(t.contract),e.xp6(3),e.Oqu(t.order_number),e.xp6(3),e.Oqu(t.product.name),e.xp6(5),e.Q6J("disabled",!n._auth.checkPermissions("rod","write")),e.xp6(1),e.Q6J("selected","Booked"==t.status)("disabled",t.on_hold),e.xp6(2),e.Q6J("selected","To Factory"==t.status)("disabled",t.on_hold),e.xp6(2),e.Q6J("selected","In Factory"==t.status)("disabled",t.on_hold||"In Factory"==t.status)("hidden","In Factory"!=t.status),e.xp6(2),e.Q6J("selected","Withdrawn"==t.status)("disabled",t.on_hold),e.xp6(2),e.Q6J("selected","Delivered"==t.status)("disabled",t.on_hold),e.xp6(2),e.Q6J("selected",t.on_hold),e.xp6(2),e.Q6J("ngIf",t.on_hold),e.xp6(3),e.Udp("width",t.progress,"%"),e.xp6(1),e.hij("",t.progress,"% "),e.xp6(2),e.Q6J("ngIf",t.fsc),e.xp6(1),e.Q6J("ngIf",!t.fsc),e.xp6(3),e.Q6J("ngIf",t.edit_invoice),e.xp6(1),e.Q6J("ngIf",!t.invoice_no&&!t.edit_invoice),e.xp6(1),e.Q6J("ngIf",t.invoice_no&&!t.edit_invoice),e.xp6(3),e.Q6J("ngIf",t.delivery_notes_count>1),e.xp6(1),e.Q6J("ngIf",0==t.delivery_notes_count),e.xp6(1),e.Q6J("ngIf",1==t.delivery_notes_count),e.xp6(3),e.Q6J("ngIf",t.edit_schedule_ref),e.xp6(1),e.Q6J("ngIf",!t.schedule_ref&&!t.edit_schedule_ref),e.xp6(1),e.Q6J("ngIf",t.schedule_ref&&!t.edit_schedule_ref),e.xp6(3),e.Q6J("ngIf","0"==t.job_notes_count),e.xp6(1),e.Q6J("ngIf","0"!=t.job_notes_count),e.xp6(1),e.Q6J("ngIf","0"!=t.job_notes_count&&t.latest_job_note.description),e.xp6(3),e.Q6J("routerLink",e.VKq(45,Z,t.id)),e.xp6(4),e.Q6J("ngIf",n._auth.checkPermissions("rod","write")),e.xp6(1),e.Q6J("ngIf",n._auth.checkPermissions("rod","write")),e.xp6(1),e.Q6J("ngIf",n._auth.checkPermissions("rod","write"))}}const kt=[{path:"",component:(()=>{class r{constructor(t,n,o,i,a){this._rod=t,this.helper=n,this._modal=o,this.router=i,this._auth=a,this.rods=[],this.searchParams={search:"",page_size:10,page:1,sort_column:"work_number",sort_value:"DESC"},this.totalPages=1,this.pageFrom=1,this.pageTo=10,this.totalCount=10,this.checked=!1,this.checkAll=!1,this.modalConfig={animated:!0,keyboard:!1,backdrop:!1,ignoreBackdropClick:!0,windowClass:"modal-roles"},this.multiUpdateType="invoice_no",this.dateToday=new Date}ngOnInit(){this.rodListing()}rodListing(){this.searchSubscription&&this.searchSubscription.unsubscribe(),this.checked=!1,this.searchSubscription=this._rod.rodListing(this.searchParams).subscribe(t=>{this.searchParams.page_size=t.data.per_page,this.searchParams.page=t.data.current_page,this.totalPages=t.data.last_page,this.pageFrom=t.data.from,this.pageTo=t.data.to,this.totalCount=t.data.total,this.checkAll=!1,this.rods=t.data.data.map(n=>(n.edit_invoice=!1,n.edit_schedule_ref=!1,n))})}selectOptions(){this.checked=!!this.rods.find(t=>t.checked),this.checkAll=!this.rods.find(t=>!t.checked)}selectAll(){console.log(this.checkAll,this.rods.find(t=>!t.checked)),this.rods.map(this.checkAll?t=>t.checked=!0:t=>t.checked=!1),this.checkAll=!this.rods.find(t=>!t.checked),this.selectOptions()}addSalesOrder(){const t=this._modal.open(w,this.modalConfig);t.componentInstance.type="add",t.componentInstance.response.subscribe(n=>{n.success&&this.rodListing(),t.close()})}editSalesOrder(t,n){const o=this._modal.open(w,this.modalConfig);o.componentInstance.type="edit",o.componentInstance.order=t,o.componentInstance.response.subscribe(i=>{i.success&&(this.rods[n]=i.data),o.close()})}addJobNote(t,n){this.modalConfig.windowClass="modal-roles job-notes-modal";const o=this._modal.open(le._,this.modalConfig);o.componentInstance.orderId=t,o.componentInstance.response.subscribe(i=>{i.success&&!i.close&&(this.rods[n]=i.data),i.close&&(this.rodListing(),o.dismiss(),this.modalConfig.windowClass="modal-roles")})}editInvoiceNo(t){this.rods[t].edit_invoice=!0,setTimeout(function(){document.getElementById("edit-invoice-no-"+t).focus()},20)}editScheduleRef(t){this.rods[t].edit_schedule_ref=!0,setTimeout(function(){document.getElementById("edit-schedule-ref-"+t).focus()},20)}updateInvoiceNo(t,n){if("keyup"==t.type&&13!=t.keyCode)return;if(!t.target.value||t.target.value==this.rods[n].invoice_no)return void(this.rods[n].edit_invoice=!1);let o={id:[this.rods[n].id],type:"invoice_no",data:t.target.value};this._rod.multipleUpdateOrder(o).subscribe(i=>{this.helper.toastSuccess(i.message),this.rods[n].edit_invoice=!1,this.rods[n].invoice_no=o.data})}updateScheduleRef(t,n){if("keyup"==t.type&&13!=t.keyCode)return;if(!t.target.value||t.target.value==this.rods[n].schedule_ref)return void(this.rods[n].edit_schedule_ref=!1);let o={id:[this.rods[n].id],type:"schedule_ref",data:t.target.value};this._rod.multipleUpdateOrder(o).subscribe(i=>{this.helper.toastSuccess(i.message),this.rods[n].edit_schedule_ref=!1,this.rods[n].schedule_ref=o.data})}multipleUpdate(t){this.multiUpdateType=t;let n=[];this.rods.forEach(a=>{a.checked&&n.push(a.id)}),console.log(n);let o={id:n,type:this.multiUpdateType,data:""};const i=this._modal.open(Ce,this.modalConfig);i.componentInstance.type=this.multiUpdateType,i.componentInstance.response.subscribe(a=>{a.success?(o.data=a.data,this._rod.multipleUpdateOrder(o).subscribe(l=>{this.helper.toastSuccess(l.message),this.rods.forEach(p=>{n.find(u=>u==p.id)&&(p[this.multiUpdateType]=a.data)}),i.dismiss()})):i.dismiss()})}updateStatus(t,n,o){if("On Hold"==n.target.value||"Off Hold"==n.target.value)return this.updateHoldStatus(t),void(n.target.value=t.status);let i={hold:t.on_hold,from:t.status,to:n.target.value,model:[t],status:n.target.value};this.modalConfig.windowClass="modal-roles change-status-modal";const a=this._modal.open(v,this.modalConfig);a.componentInstance.data=i,a.componentInstance.response.subscribe(l=>{n.target.value=l.data.status,this.rods[o]=l.data,a.dismiss(),this.modalConfig.windowClass="modal-roles"})}updateHoldStatus(t){let n={hold:!t.on_hold,from:t.on_hold?"On Hold":t.status,to:t.on_hold?"Off Hold":"On Hold",model:[t],status:t.status};this.modalConfig.windowClass="modal-roles change-status-modal";const o=this._modal.open(v,this.modalConfig);o.componentInstance.data=n,o.componentInstance.response.subscribe(i=>{t.on_hold=i.data.on_hold,o.dismiss()}),this.modalConfig.windowClass="modal-roles"}deleteOrder(t,n){const o=this._modal.open(ce.p,this.modalConfig);o.componentInstance.data=t,o.componentInstance.response.subscribe(i=>{i.success&&this.rods.splice(n,1),o.dismiss()})}viewTimeline(t,n){this.modalConfig.windowClass="modal-roles timeline";const o=this._modal.open(_e.z,this.modalConfig);o.componentInstance.rod=t,o.componentInstance.response.subscribe(i=>{i.success&&this.router.navigate(["rod/delivery-notes",t.id]),i.data&&(this.rods[n]=i.data),o.dismiss(),this.modalConfig.windowClass="modal-roles"})}bulkStatusUpdate(t){if("Off Hold"!=t.target.value&&!this.checkBulkStatus())return this.helper.toastError("Only orders with same status can be updated in bulk."),void(t.target.value="select");if(!this.checkBulkHoldStatus())return this.helper.toastError("Only orders with same status can be updated in bulk."),void(t.target.value="select");let n=this.rods.find(g=>g.checked);if(n.status==t.target.value)return void(t.target.value="select");let o=this.rods.filter(g=>{if(g.checked)return g}),i=n.on_hold,a=t.target.value,l=n.status;"On Hold"==t.target.value?(i=!0,a=t.target.value,l=n.status):"Off Hold"==t.target.value?(i=!1,a=l):"On Hold"!=t.target.value&&"On Hold"!=t.target.value&&i?i=!1:(i=!1,l=t.target.value);let p={hold:i,from:n.on_hold?"On Hold":n.status,to:n.on_hold?"Off Hold":a,model:o,status:l};this.modalConfig.windowClass="modal-roles change-status-modal";const u=this._modal.open(v,this.modalConfig);u.componentInstance.data=p,u.componentInstance.type="bulk",u.componentInstance.response.subscribe(g=>{g.success&&this.rodListing(),t.target.value="select",u.dismiss(),this.modalConfig.windowClass="modal-roles"})}checkBulkStatus(){let t="",n=!0;return this.rods.forEach(o=>{o.checked&&""==t&&(t=o.status),o.status!=t&&o.checked&&""!=t&&(n=!1)}),n}checkBulkHoldStatus(){let n,t=!0;return this.rods.forEach(o=>{o.checked&&null==n&&(n=o.on_hold),o.on_hold!=n&&o.checked&&null!=n&&(t=!1)}),t}searchRod(){(0==this.searchParams.search.length||this.searchParams.search.length>=3)&&(this.searchParams.page=1,this.rodListing())}changePage(t){console.log(t),this.searchParams.page=t,this.rodListing()}ChangePageSize(t){console.log(t),this.searchParams.page=1,this.searchParams.page_size=t,this.rodListing()}completeOrder(t,n){if(parseInt(t.progress)<100||"Delivered"!=t.status)return void this.helper.toastError("Cannot complete order because it is still in production");let o={hold:t.on_hold,from:t.status,to:"Completed",model:[t],status:"Completed"};this.modalConfig.windowClass="modal-roles change-status-modal";const i=this._modal.open(v,this.modalConfig);i.componentInstance.data=o,i.componentInstance.response.subscribe(a=>{a.success&&this.rods.splice(n,1),i.dismiss()})}addMultipleJobNote(){const t=this._modal.open(Pe,this.modalConfig);t.componentInstance.data=this.rods,t.componentInstance.response.subscribe(n=>{n.success?this._rod.addMultipleJobNote(n.data).subscribe(i=>{this.helper.toastSuccess(i.message),this.rodListing(),t.dismiss()}):t.dismiss()})}downloadData(){this._rod.downloadData(this.searchParams).subscribe(t=>{window.open(t.data.link)})}sortData(t){this.searchParams.sort_column=t,this.searchParams.sort_value="ASC"==this.searchParams.sort_value?"DESC":"ASC",console.log(this.searchParams),this.rodListing()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.W),e.Y36(f.B),e.Y36(b.FF),e.Y36(h.F0),e.Y36(k.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-rod"]],decls:89,vars:32,consts:[[1,"dashboard-main"],[1,"dashboard-content"],[1,"d-flex","align-items-center","mb-16","for-respo-devices-rod","justify-content-between","mr-70"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","javascript:void(0)",1,"breadcrumb-link"],["href","javascript:void(0)",1,"breadcrumb-link","active"],["class","d-flex btn-feature",4,"ngIf"],[1,"d-flex","for-respo-devices-rod-btn"],["class","btn-apply","href","javascript:void(0)",3,"click",4,"ngIf"],["data-toggle","modal","data-target","#Download-1","href","javascript:void(0)",1,"credit-check",3,"click"],["name","download",1,"download"],[1,"roles-main","delivery-list-table","ROD-main"],[1,"d-flex","align-items-center","justify-content-between","rod-fixed-btn","delivery-list-main"],[1,"d-flex","for-media-setts"],[1,"form-group","sear-bar-roles","position-relative","mb-0"],["type","search","placeholder","Search..","id","email",1,"form-control","form-control-roles",3,"ngModel","ngModelChange","input"],["name","search",1,"search-ctm"],[1,"mr-70","d-flex"],["class","select-box",4,"ngIf"],[1,"tab-table"],[1,"tables-roles-main","tables-users-main"],[1,"table"],[1,"thead-ctm"],[4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"inner-cell"],["class","fa fa-arrow-down sorting-arrow","aria-hidden","true",4,"ngIf"],["class","fa fa-arrow-up sorting-arrow","aria-hidden","true",4,"ngIf"],[1,"t-body-ctm"],["class","active-row",3,"ngClass",4,"ngFor","ngForOf"],[3,"from","to","pageSize","currentPage","totalPages","total","changePage","ChangePageSize"],[1,"d-flex","btn-feature"],["href","javascript:void(0)",1,"Invoice",3,"click"],["name","plus",1,"plus"],["href","javascript:void(0)",1,"Schedule",3,"click"],["href","javascript:void(0)",1,"btn-apply",3,"click"],[1,"select-box"],[1,"form-group"],[1,"arrow-design"],[1,"form-control","bulk-select-status",3,"change"],["value","select","selected",""],["value","Booked"],["value","To Factory"],["value","Delivered"],["value","Withdrawn"],["value","On Hold"],["value","Off Hold"],[1,"remember-me"],[1,"custom-check","custom-check-r"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"checkmark"],["aria-hidden","true",1,"fa","fa-arrow-down","sorting-arrow"],["aria-hidden","true",1,"fa","fa-arrow-up","sorting-arrow"],[1,"active-row",3,"ngClass"],[1,"select-box","inner-cell"],[1,"form-control",3,"disabled","change"],["value","Booked",3,"selected","disabled"],["value","To Factory",3,"selected","disabled"],["value","In Factory",3,"selected","disabled","hidden"],["value","Withdrawn",3,"selected","disabled"],["value","Delivered",3,"selected","disabled"],["value","On Hold",3,"selected"],["value","Off Hold",4,"ngIf"],[1,"position-relative"],[1,"progress-cell-bar"],["class","inner-cell",4,"ngIf"],[1,"inner-cell","list-icons-talbe-sec"],["type","text","class","edit-inline-input","autofocus","",3,"value","id","focusout","keyup",4,"ngIf"],["class","icon-anchor-list",4,"ngIf"],["class","icon-anchor-list","href","javascript:void(0)",4,"ngIf"],["class","icon-anchor-list red",3,"routerLink",4,"ngIf"],["class","icon-anchor-list","href","javascript:void(0)",3,"routerLink",4,"ngIf"],["class","inner-cell icon-anchor-list",4,"ngIf"],[1,"inner-cell","view-anchor-tooltip"],["class","icon-anchor-list","href","javascript:void(0)",3,"click",4,"ngIf"],["class","view-anchor red","href","javascript:void(0)",3,"click",4,"ngIf"],["class","tooltiptext-view",4,"ngIf"],[1,"inner-cell","list-icons-talbe"],["href","javascript:void(0)",1,"icon-anchor-list",3,"routerLink"],["name","book",1,"icon-width"],["href","javascript:void(0)",1,"icon-anchor-list",3,"click"],["name","trending-up",1,"icon-width"],["name","check"],["type","text","autofocus","",1,"edit-inline-input",3,"value","id","focusout","keyup"],[1,"icon-anchor-list"],["class","icon-width","name","edit-2",3,"click",4,"ngIf"],["name","edit-2",1,"icon-width",3,"click"],["href","javascript:void(0)",1,"icon-anchor-list"],[1,"icon-anchor-list","red",3,"routerLink"],["name","edit-2",1,"icon-width",3,"routerLink"],["name","edit-2",1,"icon-width"],[1,"inner-cell","icon-anchor-list"],["name","plus",1,"icon-width"],["href","javascript:void(0)",1,"view-anchor","red",3,"click"],[1,"tooltiptext-view"],[1,"d-flex","align-items-center","justify-content-end"],["href","javascript:void(0)",1,"tooltip-anchor-modal",3,"click"],["name","plus",1,"icon-width","w15"],[1,"toop-hight",3,"innerHtml"],[1,"date-tooptip-iner"],["name","check",1,"icon-width"],["name","edit-3",1,"icon-width"],["name","trash",1,"icon-width"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),e._uU(6,"ROD"),e.qZA()(),e.TgZ(7,"li",4)(8,"a",6),e._uU(9),e.ALo(10,"date"),e.qZA()()(),e.YNc(11,De,10,0,"div",7),e.TgZ(12,"div",8),e.YNc(13,Ie,3,0,"a",9),e.TgZ(14,"a",10),e.NdJ("click",function(){return n.downloadData()}),e._UZ(15,"i-feather",11),e._uU(16," Download Data "),e.qZA()()(),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"input",16),e.NdJ("ngModelChange",function(i){return n.searchParams.search=i})("input",function(){return n.searchRod()}),e.qZA(),e._UZ(22,"i-feather",17),e.qZA()(),e.TgZ(23,"div",18),e.YNc(24,Qe,18,0,"div",19),e.qZA()(),e.TgZ(25,"div",20)(26,"div",21)(27,"table",22)(28,"thead",23)(29,"tr"),e.YNc(30,Ee,5,2,"th",24),e.TgZ(31,"th",25),e.NdJ("click",function(){return n.sortData("work_number")}),e.TgZ(32,"p",26),e._uU(33,"Work# "),e.YNc(34,Fe,1,0,"i",27),e.YNc(35,Re,1,0,"i",28),e.qZA()(),e.TgZ(36,"th",25),e.NdJ("click",function(){return n.sortData("customers.name")}),e.TgZ(37,"p",26),e._uU(38,"Customer "),e.YNc(39,Ye,1,0,"i",27),e.YNc(40,He,1,0,"i",28),e.qZA()(),e.TgZ(41,"th",25),e.NdJ("click",function(){return n.sortData("contract")}),e.TgZ(42,"p",26),e._uU(43,"Contract "),e.YNc(44,je,1,0,"i",27),e.YNc(45,ze,1,0,"i",28),e.qZA()(),e.TgZ(46,"th",25),e.NdJ("click",function(){return n.sortData("order_number")}),e.TgZ(47,"p",26),e._uU(48,"Order# "),e.YNc(49,Le,1,0,"i",27),e.YNc(50,$e,1,0,"i",28),e.qZA()(),e.TgZ(51,"th",25),e.NdJ("click",function(){return n.sortData("products.name")}),e.TgZ(52,"p",26),e._uU(53,"Product "),e.YNc(54,Be,1,0,"i",27),e.YNc(55,We,1,0,"i",28),e.qZA()(),e.TgZ(56,"th")(57,"p",26),e._uU(58,"Status"),e.qZA()(),e.TgZ(59,"th",25),e.NdJ("click",function(){return n.sortData("progress")}),e.TgZ(60,"p",26),e._uU(61,"Progress "),e.YNc(62,Ve,1,0,"i",27),e.YNc(63,Ke,1,0,"i",28),e.qZA()(),e.TgZ(64,"th",25),e.NdJ("click",function(){return n.sortData("fsc")}),e.TgZ(65,"p",26),e._uU(66,"FSC "),e.YNc(67,Ge,1,0,"i",27),e.YNc(68,Xe,1,0,"i",28),e.qZA()(),e.TgZ(69,"th",25),e.NdJ("click",function(){return n.sortData("invoice_no")}),e.TgZ(70,"p",26),e._uU(71,"Invoice "),e.YNc(72,et,1,0,"i",27),e.YNc(73,tt,1,0,"i",28),e.qZA()(),e.TgZ(74,"th")(75,"p",26),e._uU(76,"Delivery Note"),e.qZA()(),e.TgZ(77,"th")(78,"p",26),e._uU(79,"Sch Ref"),e.qZA()(),e.TgZ(80,"th")(81,"p",26),e._uU(82,"Job Notes"),e.qZA()(),e.TgZ(83,"th")(84,"p",26),e._uU(85,"Actions"),e.qZA()()()(),e.TgZ(86,"tbody",29),e.YNc(87,Ot,71,47,"tr",30),e.qZA()()(),e.TgZ(88,"app-pagination",31),e.NdJ("changePage",function(i){return n.changePage(i)})("ChangePageSize",function(i){return n.ChangePageSize(i)}),e.qZA()()()()()),2&t&&(e.xp6(9),e.hij("Week ",e.xi3(10,29,n.dateToday,"ww"),""),e.xp6(2),e.Q6J("ngIf",n.checked),e.xp6(2),e.Q6J("ngIf",n._auth.checkPermissions("rod","write")),e.xp6(8),e.Q6J("ngModel",n.searchParams.search),e.xp6(3),e.Q6J("ngIf",n.checked),e.xp6(6),e.Q6J("ngIf",n._auth.checkPermissions("rod","write")),e.xp6(4),e.Q6J("ngIf","work_number"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","work_number"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(4),e.Q6J("ngIf","customers.name"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","customers.name"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(4),e.Q6J("ngIf","contract"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","contract"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(4),e.Q6J("ngIf","order_number"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","order_number"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(4),e.Q6J("ngIf","products.name"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","products.name"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(7),e.Q6J("ngIf","progress"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","progress"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(4),e.Q6J("ngIf","fsc"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","fsc"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(4),e.Q6J("ngIf","invoice_no"==n.searchParams.sort_column&&"DESC"==n.searchParams.sort_value),e.xp6(1),e.Q6J("ngIf","invoice_no"==n.searchParams.sort_column&&"ASC"==n.searchParams.sort_value),e.xp6(14),e.Q6J("ngForOf",n.rods),e.xp6(1),e.Q6J("from",n.pageFrom)("to",n.pageTo)("pageSize",n.searchParams.page_size)("currentPage",n.searchParams.page)("totalPages",n.totalPages)("total",n.totalCount))},directives:[_.O5,C.u,s.Fj,s.JJ,s.On,s.YN,s.Kr,s.Wl,_.sg,_.mk,h.yS,h.rH,Se.Q],pipes:[_.uU],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:0}.select-box.inner-cell[_ngcontent-%COMP%] > .form-group[_ngcontent-%COMP%]{width:100%}.select-box[_ngcontent-%COMP%]   .arrow-design[_ngcontent-%COMP%]{width:auto;height:auto}.select-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px 15px;font-size:inherit;font-weight:700;color:#656565;height:auto;background:#fff;border-radius:10px;border:1px solid #E0E0E0;cursor:pointer;display:flex;align-items:center;-webkit-appearance:none;appearance:none}a.icon-anchor-list.red[_ngcontent-%COMP%], a.view-anchor.red[_ngcontent-%COMP%]{color:#dc0100!important}.edit-inline-input[_ngcontent-%COMP%]{outline:none;border-radius:5px;border:1px solid #ccc;padding:5px 15px;width:100px}.bulk-select-status[_ngcontent-%COMP%]{width:16.3rem!important;height:4.4rem!important;font-size:12px!important}.tables-roles-main.tables-users-main[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]   thead.thead-ctm[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]:first-child{width:30px!important}.progress-cell-bar[_ngcontent-%COMP%]{top:10px}"]}),r})()},{path:"delivery-notes/:id",component:L}];let At=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[h.Bz.forChild(kt)],h.Bz]}),r})();var wt=c(5530),Ut=c(9618);let Nt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[_.ez,At,s.u5,b.bz,C.p.pick(wt.kEt),Ut.m,N]]}),r})()}}]);